
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>XML &#8212; Apuntes de Lenguajes de Marcas v1.3</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="Recuperación de información" href="tema6.html" />
    <link rel="prev" title="Javascript" href="tema4.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="xml">
<h1>XML<a class="headerlink" href="#xml" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="section" id="introduccion">
<h2>Introducción<a class="headerlink" href="#introduccion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los lenguajes de marcas como HTML tienen una orientación muy clara: describir páginas web.</p>
<p>En un contexto distinto, muy a menudo ocurre que es muy difícil intercambiar datos entre programas.</p>
<p>XML es un conjunto de tecnologías orientadas a crear nuestros propios lenguajes de marcas. A estos lenguajes de marcas «propios» se les denomina «vocabularios».</p>
</div>
<div class="section" id="un-ejemplo-sencillo">
<h2>Un ejemplo sencillo<a class="headerlink" href="#un-ejemplo-sencillo" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;clientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>AcerSA<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5664332<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Mer SL<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5111444<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/clientes&gt;</span>
</pre></div>
</div>
<p>Lo fundamental es que podemos crear nuestros propios «vocabularios» XML.</p>
</div>
<div class="section" id="construccion-de-xml">
<h2>Construcción de XML<a class="headerlink" href="#construccion-de-xml" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para crear XML es importante recordar una serie de reglas:</p>
<ul class="simple">
<li>XML es «case-sensitive», es decir que no es lo mismo mayúsculas que minúsculas y que por tanto no es lo mismo <code class="docutils literal"><span class="pre">&lt;cliente&gt;</span></code>, que <code class="docutils literal"><span class="pre">&lt;Cliente&gt;</span></code> que <code class="docutils literal"><span class="pre">&lt;CLIENTE&gt;</span></code>.</li>
<li>Obligatorio: solo un elemento raíz.</li>
<li>En general, la costumbre es poner todo en minúsculas.</li>
<li>Solo se puede poner una etiqueta que empiece por letra o _. Es decir, esta etiqueta no funcionará en los programas <code class="docutils literal"><span class="pre">&lt;12Cliente&gt;</span></code>.</li>
<li>Aparte de eso, una etiqueta sí puede contener números, por lo que esta etiqueta sí es válida <code class="docutils literal"><span class="pre">&lt;Cliente12&gt;</span></code>.</li>
</ul>
</div>
<div class="section" id="validez">
<h2>Validez<a class="headerlink" href="#validez" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Un documento XML puede «estar bien formado» o «ser válido». Se dice que un documento «está bien formado» cuando respeta las reglas XML básicas. Si alguien ha definido las reglas XML para un vocabulario, podremos además decir si el documento es válido o no, lo cual es mejor que simplemente estar bien formado.</p>
<p>Por ejemplo, los siguientes archivos ni siquiera están bien formados.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;clientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>AcerSA
                <span class="nt">&lt;CIF&gt;</span>5666333<span class="nt">&lt;/CIF&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/clientes&gt;</span>
</pre></div>
</div>
<p>En este caso la etiqueta <code class="docutils literal"><span class="pre">&lt;nombre&gt;</span></code> no está cerrada.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;clientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>AcerSA<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5666333<span class="nt">&lt;/CIF&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/clientes&gt;</span>
</pre></div>
</div>
<p>En este caso, se ha puesto <code class="docutils literal"><span class="pre">&lt;cif&gt;</span></code> cerrado con <code class="docutils literal"><span class="pre">&lt;/CIF&gt;</span></code> (mayúsculas).</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span>&lt;clientes&gt;
        &lt;cliente&gt;
                &lt;nombre!&gt;AcerSA&lt;/nombre!&gt;
                &lt;CIF&gt;5666333&lt;/CIF&gt;
        &lt;/cliente&gt;
&lt;/clientes&gt;
</pre></div>
</div>
<p>Se ha utilizado la admiración, que no es válida.</p>
<p>Atención a este ejemplo:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>AcerSA<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;CIF&gt;</span>5666333<span class="nt">&lt;/CIF&gt;</span>
<span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>ACME<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;CIF&gt;</span>455321<span class="nt">&lt;/CIF&gt;</span>
<span class="nt">&lt;/cliente&gt;</span>
</pre></div>
</div>
<p>En este caso, el problema es que hay más de un elemento raíz.</p>
<p>En general, podemos asumir que un documento puede estar en uno de estos estados que de peor a mejor podríamos indicar así:</p>
<ol class="arabic simple">
<li>Mal formado (lo peor)</li>
<li>Bien formado.</li>
<li>Válido: está bien formado y además nos han dado las reglas para determinar si algo está bien o mal y el documento XML cumple dichas reglas. Este es el mejor caso.</li>
</ol>
<p>Para determinar si un documento es válido o no, se puede usar el validador del W3C situado en <a class="reference external" href="http://validator.w3c.org">http://validator.w3c.org</a></p>
</div>
<div class="section" id="gramaticas">
<h2>Gramáticas<a class="headerlink" href="#gramaticas" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Pensemos en el siguiente problema, un programador crea aplicaciones con documentos que se almacenan así:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;clientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>AcerSA<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>455321<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>ACME<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>455321<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/clientes&gt;</span>
</pre></div>
</div>
<p>Sin embargo, otro programador de la misma empresa lo hace así:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;clientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>455321<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>AcerSA<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>455321<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>ACME<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/clientes&gt;</span>
</pre></div>
</div>
<p>Está claro, que ninguno de los dos puede leer los archivos del otro, sería crítico ponerse de acuerdo en lo que se puede hacer, lo que puede aparecer y en qué orden debe hacerlo. Esto se hará mediante las DTD.</p>
<p>DTD significa Declaración de Tipo de Documento, y es un mecanismo para expresar las reglas sobre lo que se va a permitir y lo que no en archivos XML.</p>
<p>Por ejemplo, supongamos el mismo ejemplo ejemplo anterior en el que queremos formalizar lo que puede aparecer en un fichero de clientes. Se debe tener en cuenta que en un DTD se pueden indicar reglas para lo siguiente:</p>
<ul class="simple">
<li>Se puede indicar si un elemento aparece o no de forma opcional (usando <code class="docutils literal"><span class="pre">?</span></code>)</li>
<li>Se puede indicar si un elemento debe aparecer de forma obligatoria.</li>
<li>Se puede indicar si algo aparecer una o muchas veces (usando <code class="docutils literal"><span class="pre">+</span></code>).</li>
<li>Se puede indicar si algo aparece cero o muchas veces (usando <code class="docutils literal"><span class="pre">*</span></code>).</li>
</ul>
<p>Supongamos que en nuestros ficheros deseamos indicar que el elemento raíz es <code class="docutils literal"><span class="pre">&lt;listaclientes&gt;</span></code>. Dentro de <code class="docutils literal"><span class="pre">&lt;listaclientes&gt;</span></code> deseamos permitir uno o más elementos <code class="docutils literal"><span class="pre">&lt;cliente&gt;</span></code>. Dentro de <code class="docutils literal"><span class="pre">&lt;cliente&gt;</span></code> todos deberán tener <code class="docutils literal"><span class="pre">&lt;cif&gt;</span></code> y <code class="docutils literal"><span class="pre">&lt;nombre&gt;</span></code> y en ese orden. Dentro de <code class="docutils literal"><span class="pre">&lt;cliente&gt;</span></code> puede aparecer o no un elemento <code class="docutils literal"><span class="pre">&lt;diasentrega&gt;</span></code> para indicar que ese cliente exige un máximo de plazos. Como no todo el mundo usa plazos el <code class="docutils literal"><span class="pre">&lt;diasentrega&gt;</span></code> es optativo.</p>
<p>Por ejemplo, este XML sí es válido:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Mercasa<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>Este también lo es:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Mercasa<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;diasentrega&gt;</span>30<span class="nt">&lt;/diasentrega&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>Este también:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Mercasa<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;diasentrega&gt;</span>30<span class="nt">&lt;/diasentrega&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5121554<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Acer SL<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>Sin embargo, estos no lo son:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>Este archivo no tenía clientes (y era obligatorio al menos uno)</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;diasentrega&gt;</span>30<span class="nt">&lt;/diasentrega&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>Este archivo no tiene nombre de cliente.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Mercasa<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5121554<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Acer SL<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>En este archivo no se respeta el orden cif, nombre.</p>
<div class="section" id="sintaxis-dtd">
<h3>Sintaxis DTD<a class="headerlink" href="#sintaxis-dtd" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Una DTD es como un CSS, puede ir en el mismo archivo XML o puede ir en uno separado. Para poder subirlos al validador, meteremos la DTD junto con el XML.</p>
<p>La primera línea de todo XML debe ser esta:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
</pre></div>
</div>
<p>Al final del XML pondremos los datos propiamente dichos</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Mercasa<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5121554<span class="nt">&lt;/cif&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Acer SL<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>La DTD tiene esta estructura</p>
<div class="highlight-dtd"><div class="highlight"><pre><span></span><span class="k">&lt;!DOCTYPE</span> <span class="nt">listaclientes</span> <span class="k">[</span>
                <span class="k">&lt;!ELEMENT</span> <span class="nt">listaclientes</span> <span class="o">(</span><span class="nt">cliente</span><span class="o">+)</span><span class="k">&gt;</span>
                <span class="k">&lt;!ELEMENT</span> <span class="nt">cliente</span> <span class="o">(</span><span class="nt">nombre</span><span class="o">,</span> <span class="nt">cif</span><span class="o">,</span> <span class="nt">diasentrega</span><span class="o">?)</span><span class="k">&gt;</span>
                <span class="k">&lt;!ELEMENT</span> <span class="nt">nombre</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
                <span class="k">&lt;!ELEMENT</span> <span class="nt">cif</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
                <span class="k">&lt;!ELEMENT</span> <span class="nt">diasentrega</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
                <span class="k">]</span>
        <span class="k">&gt;</span>
</pre></div>
</div>
<p>Esto significa lo siguiente:</p>
<ul class="simple">
<li>Se establece el tipo de documento <code class="docutils literal"><span class="pre">listaclientes</span></code> que consta de una serie de elementos (dentro del corchete)</li>
<li>Un elemento <code class="docutils literal"><span class="pre">listaclientes</span>&#160;&#160; <span class="pre">``</span> <span class="pre">consta</span> <span class="pre">de</span> <span class="pre">uno</span> <span class="pre">o</span> <span class="pre">más</span> <span class="pre">clientes.</span> <span class="pre">El</span> <span class="pre">signo</span> <span class="pre">``+</span></code> significa «uno o más».</li>
<li>Un cliente tiene un nombre y un cif. También puede tener un elemento <code class="docutils literal"><span class="pre">diasentrega</span></code> que puede o no aparecer (el signo <code class="docutils literal"><span class="pre">?</span></code> significa «0 o 1 veces»).</li>
<li>Un <code class="docutils literal"><span class="pre">nombre</span></code> no tiene más elementos dentro, solo caracteres (<code class="docutils literal"><span class="pre">#PCDATA</span></code>)</li>
<li>Un <code class="docutils literal"><span class="pre">CIF</span></code> solo consta de caracteres.</li>
<li>Un elemento <code class="docutils literal"><span class="pre">diasentrega</span></code> consta solo de caracteres.</li>
</ul>
<p>La solución completa sería así:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE listaclientes [</span>
<span class="cp">                &lt;!ELEMENT listaclientes (cliente+)&gt;</span>
                <span class="cp">&lt;!ELEMENT cliente (nombre, cif, diasentrega?)&gt;</span>
                <span class="cp">&lt;!ELEMENT nombre (#PCDATA)&gt;</span>
                <span class="cp">&lt;!ELEMENT cif (#PCDATA)&gt;</span>
                <span class="cp">&lt;!ELEMENT diasentrega (#PCDATA)&gt;</span>
        ]&gt;
<span class="nt">&lt;listaclientes&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Mercasa<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5676443<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
        <span class="nt">&lt;cliente&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Acer SL<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;cif&gt;</span>5121554<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejemplo-de-dtd-productos">
<h3>Ejemplo de DTD (productos)<a class="headerlink" href="#ejemplo-de-dtd-productos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se pide un conjunto de reglas en forma de DTD para definir qué se permitirá en los archivos XML de datos de una empresa de fabricación:</p>
<ul class="simple">
<li>La raíz es &lt;productos&gt;</li>
<li>Dentro de productos puede haber &lt;raton&gt; o &lt;teclado&gt; que pueden repetirse e ir en cualquier orden (RRTT, T, TR, TTRR)</li>
<li>Todo &lt;raton&gt; tiene siempre un &lt;codigo&gt; y puede o no tener una &lt;descripción&gt;.</li>
<li>Todo &lt;teclado&gt; tiene siempre un &lt;codigo&gt;, debe llevar siempre una &lt;descripcion&gt; y puede o no tener un &lt;peso&gt;</li>
</ul>
<p>Elaborar la DTD que formaliza estas reglas.</p>
<div class="highlight-dtd"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">productos</span>   <span class="o">(</span><span class="nt">raton</span><span class="o">|</span><span class="nt">teclado</span><span class="o">)*</span> <span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">raton</span>       <span class="o">(</span><span class="nt">codigo</span><span class="o">,</span> <span class="nt">descripcion</span><span class="o">?)</span> <span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">codigo</span>      <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">descripcion</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">teclado</span>     <span class="o">(</span><span class="nt">codigo</span><span class="o">,</span><span class="nt">descripcion</span><span class="o">,</span><span class="nt">peso</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">peso</span>        <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<p>El siguiente fichero debe validarse correctamente:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;productos&gt;</span>
<span class="nt">&lt;/productos&gt;</span>
</pre></div>
</div>
<p>Y el siguiente también</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;productos&gt;</span>
    <span class="nt">&lt;teclado&gt;</span>
        <span class="nt">&lt;codigo&gt;</span>T1<span class="nt">&lt;/codigo&gt;</span>
        <span class="nt">&lt;descripcion&gt;</span>Teclado inalamb.<span class="nt">&lt;/descripcion&gt;</span>
    <span class="nt">&lt;/teclado&gt;</span>
<span class="nt">&lt;/productos&gt;</span>
</pre></div>
</div>
<p>Y este también (a pesar del flagrante error en el peso)</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;productos&gt;</span>
    <span class="nt">&lt;raton&gt;</span>
        <span class="nt">&lt;codigo&gt;</span>R1<span class="nt">&lt;/codigo&gt;</span>
    <span class="nt">&lt;/raton&gt;</span>
    <span class="nt">&lt;teclado&gt;</span>
        <span class="nt">&lt;codigo&gt;</span>T1<span class="nt">&lt;/codigo&gt;</span>
        <span class="nt">&lt;descripcion&gt;</span>Teclado inalamb.<span class="nt">&lt;/descripcion&gt;</span>
        <span class="nt">&lt;peso&gt;</span>|@¬|@~||@~<span class="nt">&lt;/peso&gt;</span>
    <span class="nt">&lt;/teclado&gt;</span>
<span class="nt">&lt;/productos&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ejercicio-i-dtd">
<h2>Ejercicio I (DTD)<a class="headerlink" href="#ejercicio-i-dtd" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Unos programadores necesitan un formato de fichero para que sus distintos programas intercambien información sobre ventas. El acuerdo al que han llegado es que su XML debería tener esta estructura:</p>
<ul>
<li><p class="first">El elemento raíz será <code class="docutils literal"><span class="pre">&lt;listaventas&gt;</span></code></p>
</li>
<li><p class="first">Toda <code class="docutils literal"><span class="pre">&lt;listaventas&gt;</span></code> tiene una o más ventas.</p>
</li>
<li><p class="first">Toda <code class="docutils literal"><span class="pre">&lt;venta&gt;</span></code> tiene los siguientes datos:</p>
<blockquote>
<div><ul class="simple">
<li>Importe.</li>
<li>Comprador.</li>
<li>Vendedor.</li>
<li>Fecha (optativa).</li>
<li>Un codigo de factura.</li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE listaventas[</span>
<span class="cp">  &lt;!ELEMENT listaventas (venta+)&gt;</span>
  <span class="cp">&lt;!ELEMENT venta (importe, comprador, vendedor, fecha?, codigofactura)&gt;</span>
  <span class="cp">&lt;!ELEMENT importe (#PCDATA)&gt;</span>
  <span class="cp">&lt;!ELEMENT comprador (#PCDATA)&gt;</span>
  <span class="cp">&lt;!ELEMENT vendedor (#PCDATA)&gt;</span>
  <span class="cp">&lt;!ELEMENT fecha (#PCDATA)&gt;</span>
  <span class="cp">&lt;!ELEMENT codigofactura (#PCDATA)&gt;</span>

]&gt;

<span class="nt">&lt;listaventas&gt;</span>
  <span class="nt">&lt;venta&gt;</span>
        <span class="nt">&lt;importe&gt;</span>1500<span class="nt">&lt;/importe&gt;</span>
        <span class="nt">&lt;comprador&gt;</span>Wile E.Coyote<span class="nt">&lt;/comprador&gt;</span>
        <span class="nt">&lt;vendedor&gt;</span>ACME<span class="nt">&lt;/vendedor&gt;</span>
        <span class="nt">&lt;codigofactura&gt;</span>E17<span class="nt">&lt;/codigofactura&gt;</span>
  <span class="nt">&lt;/venta&gt;</span>
  <span class="nt">&lt;venta&gt;</span>
        <span class="nt">&lt;importe&gt;</span>750<span class="nt">&lt;/importe&gt;</span>
        <span class="nt">&lt;comprador&gt;</span>Elmer Fudd<span class="nt">&lt;/comprador&gt;</span>
        <span class="nt">&lt;vendedor&gt;</span>ACME<span class="nt">&lt;/vendedor&gt;</span>
        <span class="nt">&lt;fecha&gt;</span>27-2-2015<span class="nt">&lt;/fecha&gt;</span>
        <span class="nt">&lt;codigofactura&gt;</span>E18<span class="nt">&lt;/codigofactura&gt;</span>
  <span class="nt">&lt;/venta&gt;</span>
<span class="nt">&lt;/listaventas&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-ii-dtd">
<h2>Ejercicio II (DTD)<a class="headerlink" href="#ejercicio-ii-dtd" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Crear un XML de ejemplo y la DTD asociada para unos programadores que programan una aplicación de pedidos donde hay una lista de pedidos con 0 o más pedidos. Cada pedido tiene un número de serie, una cantidad y un peso que puede ser opcional.</p>
<div class="section" id="solucion">
<h3>Solución<a class="headerlink" href="#solucion" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Este ejemplo es un documento XML válido.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>

<span class="cp">&lt;!DOCTYPE listapedidos [</span>
<span class="cp">        &lt;!ELEMENT listapedidos (pedido*)&gt;</span>
        <span class="cp">&lt;!ELEMENT pedido (numeroserie, cantidad, peso?)&gt;</span>
        <span class="cp">&lt;!ELEMENT numeroserie (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT cantidad (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT peso (#PCDATA)&gt;</span>
]&gt;

<span class="nt">&lt;listapedidos&gt;</span>
<span class="nt">&lt;/listapedidos&gt;</span>
</pre></div>
</div>
<p>Este documento <strong>no es válido</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>

<span class="cp">&lt;!DOCTYPE listapedidos [</span>
<span class="cp">        &lt;!ELEMENT listapedidos (pedido*)&gt;</span>
        <span class="cp">&lt;!ELEMENT pedido (numeroserie, cantidad, peso?)&gt;</span>
        <span class="cp">&lt;!ELEMENT numeroserie (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT cantidad (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT peso (#PCDATA)&gt;</span>
]&gt;

<span class="nt">&lt;listapedidos&gt;</span>
        <span class="nt">&lt;pedido&gt;</span>
                <span class="nt">&lt;numeroserie&gt;</span>23332244<span class="nt">&lt;/numeroserie&gt;</span>
        <span class="nt">&lt;/pedido&gt;</span>
<span class="nt">&lt;/listapedidos&gt;</span>
</pre></div>
</div>
<p>Este documento <strong>sí es válido</strong>. Las DTD solo se ocupan de determinar qué elementos hay y en qué orden, pero no se ocupan de lo que hay dentro de los elementos.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>

<span class="cp">&lt;!DOCTYPE listapedidos [</span>
<span class="cp">        &lt;!ELEMENT listapedidos (pedido*)&gt;</span>
        <span class="cp">&lt;!ELEMENT pedido (numeroserie, cantidad, peso?)&gt;</span>
        <span class="cp">&lt;!ELEMENT numeroserie (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT cantidad (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT peso (#PCDATA)&gt;</span>
]&gt;

<span class="nt">&lt;listapedidos&gt;</span>
        <span class="nt">&lt;pedido&gt;</span>
                <span class="nt">&lt;numeroserie&gt;</span>23332244<span class="nt">&lt;/numeroserie&gt;</span>
                <span class="nt">&lt;cantidad&gt;</span>ññlñ<span class="nt">&lt;/cantidad&gt;</span>
        <span class="nt">&lt;/pedido&gt;</span>
<span class="nt">&lt;/listapedidos&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ejercicio-con-atributos">
<h2>Ejercicio (con atributos)<a class="headerlink" href="#ejercicio-con-atributos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Unos programadores necesitan estructurar la información que intercambiarán los ficheros de sus aplicaciones para lo cual han determinado los requisitos siguientes:</p>
<ul class="simple">
<li>Los ficheros deben tener un elemento <code class="docutils literal"><span class="pre">&lt;listafacturas&gt;</span></code></li>
<li>Dentro de la lista debe haber una o más facturas.</li>
<li>Las facturas tienen un atributo <code class="docutils literal"><span class="pre">fecha</span></code> que es optativo.</li>
<li>Toda factura tiene un <code class="docutils literal"><span class="pre">emisor</span></code>, que es un elemento obligatorio y que debe tener un atributo <code class="docutils literal"><span class="pre">cif</span></code> que es obligatorio. Dentro de <code class="docutils literal"><span class="pre">emisor</span></code> debe haber un elemento <code class="docutils literal"><span class="pre">nombre</span></code>, que es obligatorio y puede o no haber un elemento <code class="docutils literal"><span class="pre">volumenventas</span></code>.</li>
<li>Toda factura debe tener un elemento <code class="docutils literal"><span class="pre">pagador</span></code>, el cual tiene exactamente la misma estructura que <code class="docutils literal"><span class="pre">emisor</span></code>.</li>
<li>Toda factura tiene un elemento <code class="docutils literal"><span class="pre">importe</span></code>.</li>
</ul>
<div class="section" id="solucion-ejercicio-con-atributos">
<h3>Solución ejercicio con atributos<a class="headerlink" href="#solucion-ejercicio-con-atributos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La siguiente DTD refleja los requisitos indicados en el enunciado.</p>
<div class="highlight-dtd"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">listafacturas</span> <span class="o">(</span><span class="nt">factura</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">factura</span> <span class="o">(</span><span class="nt">emisor</span><span class="o">,</span> <span class="nt">pagador</span><span class="o">,</span> <span class="nt">importe</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">factura</span> <span class="na">fecha</span> <span class="kc">CDATA</span> <span class="kc">#IMPLIED</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">emisor</span> <span class="o">(</span><span class="nt">nombre</span><span class="o">,</span> <span class="nt">volumenventas</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">nombre</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">emisor</span> <span class="na">cif</span> <span class="kc">CDATA</span> <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">volumenventas</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">pagador</span> <span class="o">(</span><span class="nt">nombre</span><span class="o">,</span> <span class="nt">volumenventas</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">pagador</span> <span class="na">cif</span> <span class="kc">CDATA</span> <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">importe</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<p>Y el XML siguiente refleja un posible documento. Puede comprobarse que es válido con respecto a la DTD.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE listafacturas SYSTEM &quot;ListaFacturas.dtd&quot;&gt;</span>
<span class="nt">&lt;listafacturas&gt;</span>
  <span class="nt">&lt;factura</span> <span class="na">fecha=</span><span class="s">&quot;11-2-2015&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;emisor</span> <span class="na">cif=</span><span class="s">&quot;123&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;nombre&gt;</span>ACME<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;/emisor&gt;</span>
        <span class="nt">&lt;pagador</span> <span class="na">cif=</span><span class="s">&quot;234&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;nombre&gt;</span>ACME Inc<span class="nt">&lt;/nombre&gt;</span>
          <span class="nt">&lt;volumenventas&gt;</span>2000<span class="nt">&lt;/volumenventas&gt;</span>
        <span class="nt">&lt;/pagador&gt;</span>
        <span class="nt">&lt;importe&gt;</span>2500<span class="nt">&lt;/importe&gt;</span>
  <span class="nt">&lt;/factura&gt;</span>
<span class="nt">&lt;/listafacturas&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ejercicio">
<h2>Ejercicio<a class="headerlink" href="#ejercicio" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Un instituto necesita registrar los cursos y alumnos que estudian en él y necesita una DTD para comprobar los documentos XML de los programas que utiliza:</p>
<ul class="simple">
<li>Tiene que haber un elemento raíz <code class="docutils literal"><span class="pre">listacursos</span></code>. Tiene que haber uno o más cursos.</li>
<li>Un curso tiene uno o más alumnos</li>
<li>Todo alumno tiene un DNI, un nombre y un apellido, puede que tenga segundo apellido o no.</li>
<li>Un alumno escoge una lista de asignaturas donde habrá una o más asignaturas. Toda asignatura tiene un nombre, un atributo código y un profesor.</li>
<li>Un profesor tiene un NRP (Número de Registro Personal), un nombre y un apellido (también puede tener o no un segundo apellido).</li>
</ul>
<div class="section" id="solucion-completa">
<h3>Solución completa<a class="headerlink" href="#solucion-completa" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;!ELEMENT listacursos (curso)+&gt;</span>
<span class="cp">&lt;!ELEMENT curso (alumno)+&gt;</span>
<span class="cp">&lt;!ELEMENT alumno (dni, nombre,</span>
<span class="cp">                    ap1, ap2?, asignatura+)&gt;</span>

<span class="cp">&lt;!ELEMENT asignatura (nombre, profesor)&gt;</span>
<span class="cp">&lt;!ATTLIST asignatura codigo CDATA #REQUIRED&gt;</span>

<span class="cp">&lt;!ELEMENT profesor (nrp, nombre, ap1, ap2?)&gt;</span>

<span class="cp">&lt;!ELEMENT dni    (#PCDATA)&gt;</span>
<span class="cp">&lt;!ELEMENT nombre (#PCDATA)&gt;</span>
<span class="cp">&lt;!ELEMENT ap1    (#PCDATA)&gt;</span>
<span class="cp">&lt;!ELEMENT ap2    (#PCDATA)&gt;</span>
<span class="cp">&lt;!ELEMENT nrp    (#PCDATA)&gt;</span>
</pre></div>
</div>
<p>Un ejemplo de fichero válido:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listacursos&gt;</span>
    <span class="nt">&lt;curso&gt;</span>
        <span class="nt">&lt;alumno&gt;</span>
            <span class="nt">&lt;dni&gt;</span>44e<span class="nt">&lt;/dni&gt;</span>
            <span class="nt">&lt;nombre&gt;</span>Juan<span class="nt">&lt;/nombre&gt;</span>
            <span class="nt">&lt;ap1&gt;</span>Sanchez<span class="nt">&lt;/ap1&gt;</span>
            <span class="nt">&lt;asignatura</span> <span class="na">codigo=</span><span class="s">&quot;LM1&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;nombre&gt;</span>Leng marcas<span class="nt">&lt;/nombre&gt;</span>
                <span class="nt">&lt;profesor&gt;</span>
                    <span class="nt">&lt;nrp&gt;</span>8<span class="nt">&lt;/nrp&gt;</span>
                    <span class="nt">&lt;nombre&gt;</span>Oscar<span class="nt">&lt;/nombre&gt;</span>
                    <span class="nt">&lt;ap1&gt;</span>Gomez<span class="nt">&lt;/ap1&gt;</span>
                <span class="nt">&lt;/profesor&gt;</span>
            <span class="nt">&lt;/asignatura&gt;</span>
        <span class="nt">&lt;/alumno&gt;</span>
    <span class="nt">&lt;/curso&gt;</span>
<span class="nt">&lt;/listacursos&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="otras-caracteristicas-de-xml">
<h2>Otras características de XML<a class="headerlink" href="#otras-caracteristicas-de-xml" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="atributos">
<h3>Atributos<a class="headerlink" href="#atributos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Un atributo XML funciona exactamente igual que un atributo HTML, en concreto un atributo es un trozo de información que acompaña a la etiqueta, en lugar de ir dentro del elemento.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;pedido</span> <span class="na">codigo=</span><span class="s">&quot;20C&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>
                ...
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
<p>En este caso, la etiqueta <code class="docutils literal"><span class="pre">pedido</span></code> tiene un atributo <code class="docutils literal"><span class="pre">codigo</span></code>.</p>
<p>¿Cuando debemos usar atributos y cuando debemos usar elementos? Resulta que el ejemplo anterior también se podría haber permitido hacerlo así:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;codigo&gt;</span>20C<span class="nt">&lt;/codigo&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>
                ...
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
<p>Hay muchas discusiones sobre qué meter dentro de elemento o atributo. Sin embargo, los expertos coinciden en señalar que en caso de duda es mejor el segundo.</p>
<p>La definición de atributos se hace por medio de una directiva llamada <code class="docutils literal"><span class="pre">ATTLIST</span></code>. En concreto si quisieramos permitir un atributo <code class="docutils literal"><span class="pre">código</span></code> en el elemento <code class="docutils literal"><span class="pre">pedido</span></code> se haría algo así.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE pedido[</span>
<span class="cp">        &lt;!ELEMENT pedido (contenido)&gt;</span>
        <span class="cp">&lt;!ELEMENT contenido (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ATTLIST pedido codigo CDATA #REQUIRED&gt;</span>
]&gt;

<span class="nt">&lt;pedido</span> <span class="na">codigo=</span><span class="s">&quot;20C&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>Pedido de cosas<span class="nt">&lt;/contenido&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
<p>En concreto este código pone que el elemento <code class="docutils literal"><span class="pre">pedido</span></code> tiene un atributo <code class="docutils literal"><span class="pre">código</span></code> con datos carácter dentro y que es obligatorio que esté presente (un atributo optativo en vez de <code class="docutils literal"><span class="pre">#REQUIRED</span></code> usará <code class="docutils literal"><span class="pre">#IMPLIED</span></code>)</p>
<p>Si probamos esto, también validará porque el atributo es <em>optativo</em></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE pedido[</span>
<span class="cp">        &lt;!ELEMENT pedido (contenido)&gt;</span>
        <span class="cp">&lt;!ELEMENT contenido (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ATTLIST pedido codigo CDATA #IMPLIED&gt;</span>
]&gt;

<span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>Pedido de cosas<span class="nt">&lt;/contenido&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="elementos-vacios">
<h3>Elementos vacíos<a class="headerlink" href="#elementos-vacios" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En ocasiones, un elemento en especial puede interesarnos que vaya vacío porque simplemente no contiene mucha información de relevancia. Por ejemplo en HTML podemos encontrarnos esto:</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>Texto texto...<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
</pre></div>
</div>
<p>Los elementos vacíos suelen utilizar para indicar pequeñas informaciones que no deseamos meter en atributos y que de todas formas tampoco son de demasiada relevancia.</p>
<p>Un elemento vacío se indica poniendo <code class="docutils literal"><span class="pre">EMPTY</span></code> en lugar de <code class="docutils literal"><span class="pre">#PCDATA</span></code></p>
<p>Por supuesto, estas dos formas de usar un atributo son válidas:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;pagado&gt;&lt;/pagado&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>...<span class="nt">&lt;/contenido&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;pagado/&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>...<span class="nt">&lt;/contenido&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
<p>La definición completa sería así:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE pedido[</span>
<span class="cp">        &lt;!ELEMENT pedido (pagado?,contenido)&gt;</span>
        <span class="cp">&lt;!ELEMENT pagado EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT contenido (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ATTLIST pedido codigo CDATA #IMPLIED&gt;</span>
]&gt;

<span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;pagado/&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>Pedido de cosas<span class="nt">&lt;/contenido&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="alternativas">
<h3>Alternativas<a class="headerlink" href="#alternativas" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Hasta ahora hemos indicado elementos donde un elemento puede aparecer o puede no aparecer, pero ¿qué ocurre si deseamos obligar a que aparezca una posibilidad entre varias?</p>
<p>Por ejemplo, supongamos que en un nuestro ejemplo de pedidos deseamos indicar si el pedido se entregó en almacén o a domicilio. A la fuerza todo pedido se entrega de alguna manera, sin embargo queremos exigir que en los XML aparezca una de esas dos alternativas. Los elementos alternativos se indican con la barra vertical <code class="docutils literal"><span class="pre">almacen|domicilio</span></code></p>
<p>Una tentación sería hacer esto (que está <strong>mal</strong>):</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE pedido[</span>
<span class="cp">        &lt;!ELEMENT pedido (pagado?, contenido, almacen?,domicilio?)&gt;</span>
        <span class="cp">&lt;!ELEMENT pagado EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT contenido (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT almacen (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT domicilio (#PCDATA&gt;</span>
]&gt;
</pre></div>
</div>
<p>Está mal porque se permite esto:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;pagado/&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>Ordenadores<span class="nt">&lt;/contenido&gt;</span>
        <span class="nt">&lt;almacen&gt;</span>Entregado el 20-2-2011<span class="nt">&lt;/almacen&gt;</span>
        <span class="nt">&lt;domicilio&gt;</span>Entregado el 20-2011<span class="nt">&lt;/domicilio&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
<p>La forma <strong>correcta</strong> es esta:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE pedido[</span>
<span class="cp">        &lt;!ELEMENT pedido (pagado?, contenido, (almacen|domicilio)?&gt;</span>
        <span class="cp">&lt;!ELEMENT pagado EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT contenido (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT almacen (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT domicilio (#PCDATA&gt;</span>
]&gt;
<span class="nt">&lt;pedido&gt;</span>
        <span class="nt">&lt;contenido&gt;</span>Ordenadores<span class="nt">&lt;/contenido&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id1">
<h2>Ejercicio<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Un mayorista informático necesita especificar las reglas de los elementos permitidos en las aplicaciones que utiliza en sus empresas, para ello ha indicado los siguientes requisitos:</p>
<ul class="simple">
<li>Una entrega consta de uno o más lotes.</li>
<li>Un lote tiene uno o más palés</li>
<li>Todo palé tiene una serie de elementos: número de cajas, contenido y peso y forma de manipulación.</li>
<li>El contenido consta de una serie de elementos: nombre del componente, procedencia (puede aparecer 0, 1 o más países), número de serie del componente, peso del componente individual y unidad de peso que puede aparecer o no.</li>
</ul>
<div class="section" id="id2">
<h3>Solución<a class="headerlink" href="#id2" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Observa como en la siguiente DTD se pone <code class="docutils literal"><span class="pre">procedencia?</span></code> y dentro de ella <code class="docutils literal"><span class="pre">pais+</span></code>. Esto nos permite que si aparece la procedencia se debe especificar uno o más países. Sin embargo si no queremos que aparezca ningun pais, el XML <strong>no necesita contener un elemento vacío</strong>.</p>
<div class="highlight-dtd"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">entrega</span> <span class="o">(</span><span class="nt">lote</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">lote</span> <span class="o">(</span><span class="nt">pale</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">pale</span> <span class="o">(</span><span class="nt">numcajas</span><span class="o">,</span> <span class="nt">contenido</span><span class="o">,</span> <span class="nt">peso</span><span class="o">,</span> <span class="nt">formamanipulacion</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">numcajas</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">peso</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">formamanipulacion</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">contenido</span> <span class="o">(</span><span class="nt">nombrecomponente</span><span class="o">,</span> <span class="nt">procedencia</span><span class="o">?,</span>
                        <span class="nt">numserie</span><span class="o">,</span> <span class="nt">peso</span><span class="o">,</span> <span class="nt">unidades</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">nombrecomponente</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">procedencia</span> <span class="o">(</span><span class="nt">pais</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">pais</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">numserie</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">unidades</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE entrega SYSTEM &quot;mayorista.dtd&quot;&gt;</span>
<span class="nt">&lt;entrega&gt;</span>
  <span class="nt">&lt;lote&gt;</span>
        <span class="nt">&lt;pale&gt;</span>
          <span class="nt">&lt;numcajas&gt;</span>3<span class="nt">&lt;/numcajas&gt;</span>
          <span class="nt">&lt;contenido&gt;</span>
                <span class="nt">&lt;nombrecomponente&gt;</span>Fuentes<span class="nt">&lt;/nombrecomponente&gt;</span>
                <span class="nt">&lt;numserie&gt;</span>3A<span class="nt">&lt;/numserie&gt;</span>
                <span class="nt">&lt;peso&gt;</span>2kg<span class="nt">&lt;/peso&gt;</span>
                <span class="nt">&lt;unidades&gt;</span>50<span class="nt">&lt;/unidades&gt;</span>
          <span class="nt">&lt;/contenido&gt;</span>
          <span class="nt">&lt;peso&gt;</span>100kg<span class="nt">&lt;/peso&gt;</span>
          <span class="nt">&lt;formamanipulacion&gt;</span>Manual<span class="nt">&lt;/formamanipulacion&gt;</span>
        <span class="nt">&lt;/pale&gt;</span>
  <span class="nt">&lt;/lote&gt;</span>
  <span class="nt">&lt;lote&gt;</span>
        <span class="nt">&lt;pale&gt;</span>
          <span class="nt">&lt;numcajas&gt;</span>2<span class="nt">&lt;/numcajas&gt;</span>
          <span class="nt">&lt;contenido&gt;</span>
                <span class="nt">&lt;nombrecomponente&gt;</span>CPUs<span class="nt">&lt;/nombrecomponente&gt;</span>
                <span class="nt">&lt;procedencia&gt;</span>
                  <span class="nt">&lt;pais&gt;</span>China<span class="nt">&lt;/pais&gt;</span>
                  <span class="nt">&lt;pais&gt;</span>Corea del Sur<span class="nt">&lt;/pais&gt;</span>
                <span class="nt">&lt;/procedencia&gt;</span>
                <span class="nt">&lt;numserie&gt;</span>5B<span class="nt">&lt;/numserie&gt;</span>
                <span class="nt">&lt;peso&gt;</span>100g<span class="nt">&lt;/peso&gt;</span>
                <span class="nt">&lt;unidades&gt;</span>1000<span class="nt">&lt;/unidades&gt;</span>
          <span class="nt">&lt;/contenido&gt;</span>
          <span class="nt">&lt;peso&gt;</span>100kg<span class="nt">&lt;/peso&gt;</span>
          <span class="nt">&lt;formamanipulacion&gt;</span>Manual<span class="nt">&lt;/formamanipulacion&gt;</span>
        <span class="nt">&lt;/pale&gt;</span>
  <span class="nt">&lt;/lote&gt;</span>
<span class="nt">&lt;/entrega&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ejercicio-mayorista-de-libros">
<h2>Ejercicio: mayorista de libros<a class="headerlink" href="#ejercicio-mayorista-de-libros" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Se desea crear un formato de intercambio de datos para una empresa mayorista de libros con el fin de que sus distintos programas puedan manejar la información interna. El formato de archivo debe tener la siguiente estructura:</p>
<ul>
<li><p class="first">Un archivo tiene una serie de operaciones dentro.</p>
</li>
<li><p class="first">Las operaciones pueden ser «venta», «compra», o cualquier combinación y secuencia de ellas, pero debe haber al menos una.</p>
</li>
<li><p class="first">Una venta tiene:</p>
<blockquote>
<div><ul class="simple">
<li>Uno o más títulos vendidos.</li>
<li>La cantidad total de libros vendidos.</li>
<li>Puede haber un elemento «entregado» que indique si la entrega se ha realizado.</li>
<li>Debe haber un elemento importe con un atributo obligatorio llamado «moneda».</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Una compra tiene:</p>
<blockquote>
<div><ul class="simple">
<li>Uno o más títulos comprados.</li>
<li>Nombre de proveedor.</li>
<li>Una fecha de compra, que debe desglosarse en elementos día, mes y año</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>El objetivo final debe ser validar un fichero como este:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;operaciones&gt;</span>
    <span class="nt">&lt;operacion&gt;</span>
        <span class="nt">&lt;venta&gt;</span>
            <span class="nt">&lt;titulosvendidos&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Don Quijote<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Rimas y leyendas<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;cantidadtotal&gt;</span>2000<span class="nt">&lt;/cantidadtotal&gt;</span>
                <span class="nt">&lt;importe</span> <span class="na">moneda=</span><span class="s">&quot;euros&quot;</span><span class="nt">&gt;</span>4400<span class="nt">&lt;/importe&gt;</span>
            <span class="nt">&lt;/titulosvendidos&gt;</span>
        <span class="nt">&lt;/venta&gt;</span>
        <span class="nt">&lt;venta&gt;</span>
            <span class="nt">&lt;titulosvendidos&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Rinconete y Cortadillo<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Sainetes<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;cantidadtotal&gt;</span>1000<span class="nt">&lt;/cantidadtotal&gt;</span>
                <span class="nt">&lt;entregado/&gt;</span>
                <span class="nt">&lt;importe</span> <span class="na">moneda=</span><span class="s">&quot;libras&quot;</span><span class="nt">&gt;</span>290<span class="nt">&lt;/importe&gt;</span>
            <span class="nt">&lt;/titulosvendidos&gt;</span>
        <span class="nt">&lt;/venta&gt;</span>
    <span class="nt">&lt;/operacion&gt;</span>
    <span class="nt">&lt;operacion&gt;</span>
        <span class="nt">&lt;compra&gt;</span>
            <span class="nt">&lt;tituloscomprados&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>De la Tierra a la Luna<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Barbarroja<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;proveedor&gt;</span>Editorial EDSA<span class="nt">&lt;/proveedor&gt;</span>
                <span class="nt">&lt;fechacompra&gt;</span>
                    <span class="nt">&lt;dia&gt;</span>10<span class="nt">&lt;/dia&gt;</span>
                    <span class="nt">&lt;mes&gt;</span>6<span class="nt">&lt;/mes&gt;</span>
                    <span class="nt">&lt;anio&gt;</span>2018<span class="nt">&lt;/anio&gt;</span>
                <span class="nt">&lt;/fechacompra&gt;</span>
            <span class="nt">&lt;/tituloscomprados&gt;</span>
        <span class="nt">&lt;/compra&gt;</span>
        <span class="nt">&lt;venta&gt;</span>
            <span class="nt">&lt;titulosvendidos&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Cinco semanas en globo<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Sainetes<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;cantidadtotal&gt;</span>700<span class="nt">&lt;/cantidadtotal&gt;</span>
                <span class="nt">&lt;entregado/&gt;</span>
                <span class="nt">&lt;importe</span> <span class="na">moneda=</span><span class="s">&quot;euros&quot;</span><span class="nt">&gt;</span>1490<span class="nt">&lt;/importe&gt;</span>
            <span class="nt">&lt;/titulosvendidos&gt;</span>
        <span class="nt">&lt;/venta&gt;</span>
        <span class="nt">&lt;compra&gt;</span>
            <span class="nt">&lt;tituloscomprados&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>De la Tierra a la Luna<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;titulo&gt;</span>Barbarroja<span class="nt">&lt;/titulo&gt;</span>
                <span class="nt">&lt;proveedor&gt;</span>Editorial Recopila<span class="nt">&lt;/proveedor&gt;</span>
                <span class="nt">&lt;fechacompra&gt;</span>
                    <span class="nt">&lt;dia&gt;</span>2<span class="nt">&lt;/dia&gt;</span>
                    <span class="nt">&lt;mes&gt;</span>12<span class="nt">&lt;/mes&gt;</span>
                    <span class="nt">&lt;anio&gt;</span>2017<span class="nt">&lt;/anio&gt;</span>
                <span class="nt">&lt;/fechacompra&gt;</span>
            <span class="nt">&lt;/tituloscomprados&gt;</span>
        <span class="nt">&lt;/compra&gt;</span>
    <span class="nt">&lt;/operacion&gt;</span>
<span class="nt">&lt;/operaciones&gt;</span>
</pre></div>
</div>
<div class="section" id="solucion-al-mayorista-de-libros">
<h3>Solución al mayorista de libros<a class="headerlink" href="#solucion-al-mayorista-de-libros" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La siguiente DTD valida el fichero arriba mostrado:</p>
<div class="highlight-dtd"><div class="highlight"><pre><span></span><span class="c">&lt;!--El elemento raíz es operaciones y dentro de él hay uno o más elementos operación--&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">operaciones</span> <span class="o">(</span><span class="nt">operacion</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="c">&lt;!--Una operación puede ser ventas o compras, en cualquier orden y repetidas las veces que sea necesario--&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">operacion</span> <span class="o">(</span><span class="nt">venta</span><span class="o">|</span><span class="nt">compra</span><span class="o">)+</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">venta</span> <span class="o">(</span><span class="nt">titulosvendidos</span><span class="o">)</span><span class="k">&gt;</span>
<span class="c">&lt;!--Una venta tiene uno o más titulos, la cantidad de libros vendidos, puede haber un elemento entregado que indique si la entrega se ha realizado, y debe haber un elemento importe con un atributo obligatorio llamado moneda. --&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">titulosvendidos</span> <span class="o">(</span><span class="nt">titulo</span><span class="o">+,</span> <span class="nt">cantidadtotal</span><span class="o">,</span> <span class="nt">entregado</span><span class="o">?,</span> <span class="nt">importe</span><span class="o">)</span><span class="k">&gt;</span>
<span class="c">&lt;!--Antes de que se nos olvide, fabricamos el elemento importe y su atributo moneda--&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">importe</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">importe</span> <span class="na">moneda</span> <span class="kc">CDATA</span> <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
<span class="c">&lt;!--Fabricamos el titulo y la cantidad total--&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">titulo</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">cantidadtotal</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="c">&lt;!--El elemento entregado parece que es un vacío--&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">entregado</span> <span class="kc">EMPTY</span><span class="k">&gt;</span>
<span class="c">&lt;!--Una compra tiene:</span>

<span class="c">-Uno o más títulos comprados.</span>
<span class="c">-Nombre de proveedor.</span>
<span class="c">-Una fecha de compra, que debe desglosarse en elementos día, mes y año --&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">compra</span> <span class="o">(</span><span class="nt">tituloscomprados</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">tituloscomprados</span> <span class="o">(</span><span class="nt">titulo</span><span class="o">+,</span> <span class="nt">proveedor</span><span class="o">,</span> <span class="nt">fechacompra</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">proveedor</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="c">&lt;!--Desglosamos la fecha--&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">fechacompra</span> <span class="o">(</span><span class="nt">dia</span><span class="o">,</span> <span class="nt">mes</span><span class="o">,</span> <span class="nt">anio</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">dia</span>  <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">mes</span>  <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">anio</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ejercicio-fabricante-de-tractores">
<h2>Ejercicio: fabricante de tractores<a class="headerlink" href="#ejercicio-fabricante-de-tractores" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Un fabricante de tractores desea unificar el formato XML de sus proveedores y para ello ha indicado que necesita que los archivos XML cumplan las siguientes restricciones:</p>
<ul class="simple">
<li>Un pedido consta de uno o más tractores.</li>
<li>Un tractor consta de uno o más componentes.</li>
<li>Un componente tiene los siguientes elementos: nombre del fabricante (atributo obligatorio), fecha de entrega  (si es posible, aunque puede que no aparezca, si aparece el dia es optativo, pero el mes y el año son obligatorios). También se necesita saber del componente si es frágil o no. También debe aparecer un elemento peso del componente y dicho elemento peso tiene un atributo unidad del peso (kilos o gramos), un elemento número de serie y puede que aparezca o no un elemento km_maximos indicando que el componente debe sustituirse tras un cierto número de kilómetros.</li>
</ul>
<p>Una posible solución sería esta (aunque se puede mejorar en algunos aspectos):</p>
<div class="highlight-dtd"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">pedido</span> <span class="o">(</span><span class="nt">tractor</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">tractor</span> <span class="o">(</span><span class="nt">componente</span><span class="o">+)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">componente</span> <span class="o">(</span><span class="nt">fecha</span><span class="o">?,</span> <span class="nt">peso</span><span class="o">,</span> <span class="nt">fragil</span><span class="o">?,</span> <span class="nt">km_maximos</span><span class="o">?)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">fragil</span> <span class="kc">EMPTY</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">peso</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">km_maximos</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">componente</span> <span class="na">nombre_fabricante</span> <span class="kc">CDATA</span> <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">peso</span> <span class="na">unidades</span> <span class="kc">CDATA</span> <span class="kc">#IMPLIED</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">fecha</span> <span class="o">(</span><span class="nt">dia</span><span class="o">?,</span> <span class="nt">mes</span><span class="o">,</span> <span class="nt">anio</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">dia</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">mes</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">anio</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<p>Un ejemplo de XML sería este:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE pedido SYSTEM &quot;tractores.dtd&quot;&gt;</span>
<span class="nt">&lt;pedido&gt;</span>
  <span class="nt">&lt;tractor&gt;</span>
        <span class="nt">&lt;componente</span> <span class="na">nombre_fabricante=</span><span class="s">&quot;John Deere&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;peso</span> <span class="na">unidades=</span><span class="s">&quot;kilos&quot;</span><span class="nt">&gt;</span>2.5<span class="nt">&lt;/peso&gt;</span>
          <span class="nt">&lt;fragil/&gt;</span>
        <span class="nt">&lt;/componente&gt;</span>
        <span class="nt">&lt;componente</span> <span class="na">nombre_fabricante=</span><span class="s">&quot;Agrotrans&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;peso</span> <span class="na">unidades=</span><span class="s">&quot;gramos&quot;</span><span class="nt">&gt;</span>50<span class="nt">&lt;/peso&gt;</span>
        <span class="nt">&lt;/componente&gt;</span>
  <span class="nt">&lt;/tractor&gt;</span>
  <span class="nt">&lt;tractor&gt;</span>
        <span class="nt">&lt;componente</span> <span class="na">nombre_fabricante=</span><span class="s">&quot;John Deere&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;fecha&gt;</span>
                <span class="nt">&lt;mes&gt;</span>Enero<span class="nt">&lt;/mes&gt;</span>
                <span class="nt">&lt;anio&gt;</span>2015<span class="nt">&lt;/anio&gt;</span>
          <span class="nt">&lt;/fecha&gt;</span>
          <span class="nt">&lt;peso&gt;</span>150<span class="nt">&lt;/peso&gt;</span>
          <span class="nt">&lt;fragil/&gt;</span>
        <span class="nt">&lt;/componente&gt;</span>
        <span class="nt">&lt;componente</span> <span class="na">nombre_fabricante=</span><span class="s">&quot;Agrotrans&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;peso</span> <span class="na">unidades=</span><span class="s">&quot;gramos&quot;</span><span class="nt">&gt;</span>50<span class="nt">&lt;/peso&gt;</span>
        <span class="nt">&lt;/componente&gt;</span>
  <span class="nt">&lt;/tractor&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-repeticiones-de-opciones">
<h2>Ejercicio: repeticiones de opciones<a class="headerlink" href="#ejercicio-repeticiones-de-opciones" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Se necesita un formato de archivo para intercambiar productos entre almacenes de productos de librería y se desea una DTD que incluya estas restricciones:</p>
<ul class="simple">
<li>Debe haber un elemento raíz pedido que puede constar de libros, cuadernos y/o lápices. Los tres elementos pueden aparecer repetidos y en cualquier orden. Tambien pueden aparecer por ejemplo 4 libros, 2 lapices y luego 4 lapices de nuevo.</li>
<li>Todo libro tiene un atributo obligatorio titulo.</li>
<li>Los elementos cuaderno tiene un atributo optativo num_hojas.</li>
<li>Todo elemento lápiz debe tener dentro un  elemento obligatorio número.</li>
</ul>
<p>La solución a la DTD:</p>
<div class="highlight-dtd"><div class="highlight"><pre><span></span><span class="k">&lt;!ELEMENT</span> <span class="nt">pedido</span> <span class="o">(</span><span class="nt">libro</span><span class="o">|</span><span class="nt">cuaderno</span><span class="o">|</span><span class="nt">lapiz</span><span class="o">)+</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">libro</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">libro</span> <span class="na">titulo</span> <span class="kc">CDATA</span> <span class="kc">#REQUIRED</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">cuaderno</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ATTLIST</span> <span class="nt">cuaderno</span> <span class="na">num_hojas</span> <span class="kc">CDATA</span> <span class="kc">#IMPLIED</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">lapiz</span> <span class="o">(</span><span class="nt">numero</span><span class="o">)</span><span class="k">&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">numero</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE pedido SYSTEM &quot;libreria.dtd&quot;&gt;</span>
<span class="nt">&lt;pedido&gt;</span>
  <span class="nt">&lt;libro</span> <span class="na">titulo=</span><span class="s">&quot;Java 8&quot;</span><span class="nt">&gt;&lt;/libro&gt;</span>
  <span class="nt">&lt;cuaderno&gt;&lt;/cuaderno&gt;</span>
  <span class="nt">&lt;libro</span> <span class="na">titulo=</span><span class="s">&quot;HTML y CSS&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;libro</span> <span class="na">titulo=</span><span class="s">&quot;SQL para Dummies&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;cuaderno</span> <span class="na">num_hojas=</span><span class="s">&quot;150&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;lapiz&gt;</span>
        <span class="nt">&lt;numero&gt;</span>2H<span class="nt">&lt;/numero&gt;</span>
  <span class="nt">&lt;/lapiz&gt;</span>
  <span class="nt">&lt;cuaderno</span> <span class="na">num_hojas=</span><span class="s">&quot;250&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;cuaderno</span> <span class="na">num_hojas=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;lapiz&gt;</span>
        <span class="nt">&lt;numero&gt;</span>2B<span class="nt">&lt;/numero&gt;</span>
  <span class="nt">&lt;/lapiz&gt;</span>
  <span class="nt">&lt;lapiz&gt;</span>
        <span class="nt">&lt;numero&gt;</span>1HB<span class="nt">&lt;/numero&gt;</span>
  <span class="nt">&lt;/lapiz&gt;</span>
<span class="nt">&lt;/pedido&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-multinacional">
<h2>Ejercicio: multinacional<a class="headerlink" href="#ejercicio-multinacional" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Una multinacional que opera en bolsa necesita un formato de intercambio de datos para que sus programas intercambien información sobre los mercados de acciones.</p>
<p>En general todo archivo constará de un listado de cosas como se detalla a continuación</p>
<ul class="simple">
<li>En el listado aparecen siempre uno o varios futuros, despues una o varias divisas, despues uno o varios bonos y una o varias letras.</li>
<li>Todos ellos tienen un atributo precio que es <strong>obligatorio</strong></li>
<li>Todos ellos tienen un elemento vacío que indica  de donde es el producto anterior: «Madrid», «Nueva York», «Frankfurt» o «Tokio».</li>
<li>Las divisas y los bonos tienen un atributo optativo que se usa para indicar si el producto ha sido estable en el pasado o no.</li>
<li>Un futuro es un valor esperado que tendrá un cierto producto en el futuro. Se debe incluir este producto en forma de elemento. También puede aparecer un elemento mercado que indique el país de procedencia del producto.</li>
<li>Todo bono tiene un elemento país_de_procedencia para saber a qué estado pertenece. Debe tener tres elementos extra llamados «valor_deseado», «valor_mínimo» y «valor_máximo» para saber los posibles precios.</li>
<li>Las divisas tienen siempre un nombre pueden incluir uno o más tipos de cambio para otras monedas.</li>
<li>Las letras tienen siempre un tipo de interés pagadero por un país emisor. El país emisor también debe existir y debe ser siempre de uno de los países cuyas capitales aparecen arriba (es decir «España», «EEUU», «Alemania» y «Japón»</li>
</ul>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE listado [</span>
<span class="cp">        &lt;!ELEMENT listado (futuro+, divisa+, bono+, letra+)&gt;</span>
        <span class="cp">&lt;!ATTLIST futuro precio CDATA #REQUIRED&gt;</span>
        <span class="cp">&lt;!ATTLIST divisa precio CDATA #REQUIRED&gt;</span>
        <span class="cp">&lt;!ATTLIST bono precio CDATA #REQUIRED&gt;</span>
        <span class="cp">&lt;!ATTLIST letra precio CDATA #REQUIRED&gt;</span>
        <span class="cp">&lt;!ELEMENT ciudad_procedencia (madrid|nyork|frankfurt|tokio)&gt;</span>
        <span class="cp">&lt;!ELEMENT madrid EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT nyork EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT frankfurt EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT tokio EMPTY&gt;</span>
        <span class="cp">&lt;!ATTLIST divisa estable CDATA #IMPLIED&gt;</span>
        <span class="cp">&lt;!ATTLIST bono estable CDATA #IMPLIED&gt;</span>
        <span class="cp">&lt;!ELEMENT futuro (producto, mercado?, ciudad_procedencia)&gt;</span>
        <span class="cp">&lt;!ELEMENT producto (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT mercado (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT bono (pais_de_procedencia,valor_deseado,</span>
<span class="cp">                        valor_minimo, valor_maximo, ciudad_procedencia)&gt;</span>
        <span class="cp">&lt;!ELEMENT valor_deseado (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT valor_minimo (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT valor_maximo (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT pais_de_procedencia (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT divisa (nombre_divisa,</span>
<span class="cp">                        tipo_de_cambio+, ciudad_procedencia)&gt;</span>
        <span class="cp">&lt;!ELEMENT nombre_divisa (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT tipo_de_cambio (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT letra (tipo_de_interes, pais_emisor,ciudad_procedencia)&gt;</span>
        <span class="cp">&lt;!ELEMENT tipo_de_interes (#PCDATA)&gt;</span>
        <span class="cp">&lt;!ELEMENT pais_emisor (espania|eeuu|alemania|japon)&gt;</span>
        <span class="cp">&lt;!ELEMENT espania     EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT eeuu        EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT alemania    EMPTY&gt;</span>
        <span class="cp">&lt;!ELEMENT japon       EMPTY&gt;</span>
]&gt;


<span class="nt">&lt;listado&gt;</span>
        <span class="nt">&lt;futuro</span> <span class="na">precio=</span><span class="s">&quot;11.28&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;producto&gt;</span>Cafe<span class="nt">&lt;/producto&gt;</span>
                <span class="nt">&lt;mercado&gt;</span>América Latina<span class="nt">&lt;/mercado&gt;</span>
                <span class="nt">&lt;ciudad_procedencia&gt;</span>
                        <span class="nt">&lt;frankfurt/&gt;</span>
                <span class="nt">&lt;/ciudad_procedencia&gt;</span>
        <span class="nt">&lt;/futuro&gt;</span>
        <span class="nt">&lt;divisa</span> <span class="na">precio=</span><span class="s">&quot;183&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;nombre_divisa&gt;</span>Libra esterlina<span class="nt">&lt;/nombre_divisa&gt;</span>
                <span class="nt">&lt;tipo_de_cambio&gt;</span>2.7:1 euros<span class="nt">&lt;/tipo_de_cambio&gt;</span>
                <span class="nt">&lt;tipo_de_cambio&gt;</span>1:0.87 dólares<span class="nt">&lt;/tipo_de_cambio&gt;</span>
                <span class="nt">&lt;ciudad_procedencia&gt;</span>
                        <span class="nt">&lt;madrid/&gt;</span>
                <span class="nt">&lt;/ciudad_procedencia&gt;</span>
        <span class="nt">&lt;/divisa&gt;</span>
        <span class="nt">&lt;bono</span> <span class="na">precio=</span><span class="s">&quot;10000&quot;</span> <span class="na">estable=</span><span class="s">&quot;si&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;pais_de_procedencia&gt;</span>
                        Islandia
                <span class="nt">&lt;/pais_de_procedencia&gt;</span>
                <span class="nt">&lt;valor_deseado&gt;</span>9980<span class="nt">&lt;/valor_deseado&gt;</span>
                <span class="nt">&lt;valor_minimo&gt;</span>9950<span class="nt">&lt;/valor_minimo&gt;</span>
                <span class="nt">&lt;valor_maximo&gt;</span>10020<span class="nt">&lt;/valor_maximo&gt;</span>
                <span class="nt">&lt;ciudad_procedencia&gt;</span>
                        <span class="nt">&lt;tokio/&gt;</span>
                <span class="nt">&lt;/ciudad_procedencia&gt;</span>
        <span class="nt">&lt;/bono&gt;</span>
        <span class="nt">&lt;letra</span> <span class="na">precio=</span><span class="s">&quot;45020&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;tipo_de_interes&gt;</span>4.54%<span class="nt">&lt;/tipo_de_interes&gt;</span>
                <span class="nt">&lt;pais_emisor&gt;</span>
                        <span class="nt">&lt;espania/&gt;</span>
                <span class="nt">&lt;/pais_emisor&gt;</span>
                <span class="nt">&lt;ciudad_procedencia&gt;</span>
                        <span class="nt">&lt;madrid/&gt;</span>
                <span class="nt">&lt;/ciudad_procedencia&gt;</span>
        <span class="nt">&lt;/letra&gt;</span>
<span class="nt">&lt;/listado&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h2>Ejercicio<a class="headerlink" href="#id3" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La Seguridad Social necesita un formato de intercambio unificado para distribuir la información personal de los afiliados.</p>
<ul>
<li><p class="first">Todo archivo XML contiene un listado de uno o mas afiliados</p>
</li>
<li><p class="first">Todo afiliado tiene los siguientes elementos:</p>
<blockquote>
<div><ul>
<li><p class="first">DNI o NIE</p>
</li>
<li><p class="first">Nombre</p>
</li>
<li><p class="first">Apellidos</p>
</li>
<li><p class="first">Situación laboral: que tiene que ser una y solo una de entre estas posibilidades: «en_paro», «en_activo», «jubilado», «edad_no_laboral»</p>
</li>
<li><p class="first">Fecha de nacimiento: que se desglosa en los elementos obligatorios día, mes y anio.</p>
</li>
<li><p class="first">Listado de bajas: que indica las situaciones de baja laboral del empleado. Dicho listado consta de una repetición de 0 o más bajas:</p>
<blockquote>
<div><ul class="simple">
<li>Una baja consta de tres elementos: causa (obligatoria), fecha de inicio (obligatorio) y fecha de final (optativa),</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Listado de prestaciones cobradas: consta de 0 o más elementos prestación, donde se indicará la cantidad percibida (obligatorio), la fecha de inicio (obligatorio) y la fecha de final (obligatorio)</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="esquemas-xml">
<h2>Esquemas XML<a class="headerlink" href="#esquemas-xml" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los esquemas XML son un mecanismo radicalmente distinto de crear reglas para validar ficheros XML. Se caracterizan por:</p>
<ul class="simple">
<li>Estar escritos en XML. Por lo tanto, las mismas bibliotecas que permiten procesar ficheros XML de datos permitirían procesar ficheros XML de reglas.</li>
<li>Son mucho más potentes: ofrecen soporte a tipos de datos con comprobación de si el contenido de una etiqueta es de tipo <code class="docutils literal"><span class="pre">integer</span></code>, <code class="docutils literal"><span class="pre">date</span></code> o de otros tipos. También se permite añadir restricciones como indicar valores mínimo y máximo para un número o determinar el patrón que debe seguir una cadena válida</li>
<li>Ofrecen la posibilidad de usar <em>espacios de nombres</em>. Los espacios de nombres son similares a los paquetes Java: permiten a personas distintas el definir etiquetas con el mismo nombre pudiendo luego distinguir etiquetas iguales en función del espacio de nombres que importemos.</li>
</ul>
<div class="section" id="un-ejemplo">
<h3>Un ejemplo<a class="headerlink" href="#un-ejemplo" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Supongamos que deseamos tener ficheros XML con un solo elemento llamado <code class="docutils literal"><span class="pre">&lt;cantidad&gt;</span></code> que debe tener dentro un número.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad&gt;</span>20<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
<p>Un posible esquema sería el siguiente:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:integer&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>¿Qué contiene este fichero?</p>
<ol class="arabic simple">
<li>En primer lugar se indica que este fichero va a usar unas etiquetas ya definidas en un espacio de nombre (o XML Namespace, de ahí <code class="docutils literal"><span class="pre">xmlns</span></code>). Esa definición se hace en el espacio de nombres que aparece en la URL. Nuestro validador no descargará nada, esa URL es oficial y todos los validadores la conocen. Las etiquetas de ese espacio de nombres van a usar un prefijo que en este caso será <code class="docutils literal"><span class="pre">xsd</span></code>.</li>
<li>Se indica que habrá un solo elemento y que el tipo de ese elemento es <code class="docutils literal"><span class="pre">&lt;xsd:integer&gt;</span></code>. Es decir, un entero básico.</li>
</ol>
<p>Si probamos el fichero de esquema con el fichero de datos que hemos indicado veremos que efectivamente el fichero XML de datos es válido. Sin embargo, si en lugar de una cantidad incluyésemos una cadena, veríamos que el fichero <strong>no se validaría</strong></p>
</div>
<div class="section" id="tipos-de-datos-basicos">
<h3>Tipos de datos básicos<a class="headerlink" href="#tipos-de-datos-basicos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Podemos usar los siguientes tipos de datos:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">xsd:byte</span></code>: entero de 8 bits.</li>
<li><code class="docutils literal"><span class="pre">xsd:short</span></code>: entero de 16 bits</li>
<li><code class="docutils literal"><span class="pre">xsd:int</span></code>: número entero de 32 bits.</li>
<li><code class="docutils literal"><span class="pre">xsd:long</span></code>: entero de 64 bits.</li>
<li><code class="docutils literal"><span class="pre">xsd:integer</span></code>: número entero sin límite de capacidad.</li>
<li><code class="docutils literal"><span class="pre">xsd:unsignedByte</span></code>: entero de 8 bits sin signo.</li>
<li><code class="docutils literal"><span class="pre">xsd:unsignedShort</span></code>: entero de 16 bits sin signo.</li>
<li><code class="docutils literal"><span class="pre">xsd:unsignedInt</span></code>: entero de 32 bits sin signo.</li>
<li><code class="docutils literal"><span class="pre">xsd:unsignedLong</span></code>: entero de 64 bits sin signo.</li>
<li><code class="docutils literal"><span class="pre">xsd:string</span></code>: cadena de caracteres en la que los espacios en blanco se respetan.</li>
<li><code class="docutils literal"><span class="pre">xsd:normalizedString</span></code>: cadena de caracteres en la que los espacios en blanco no se respetan y se reemplazarán secuencias largas de espacios o fines de línea por un solo espacio.</li>
<li><code class="docutils literal"><span class="pre">xsd:date</span></code>: permite almacenar fechas que deben ir <strong>obligatoriamente</strong> en formato AAAA-MM-DD (4 digitos para el año, seguidos de un guión, seguido de dos dígitos para el mes, seguidos de un guión, seguidos de dos dígitos para el día del mes)</li>
<li><code class="docutils literal"><span class="pre">xsd:time</span></code>: para almacenar horas en formato HH:MM:SS.C</li>
<li><code class="docutils literal"><span class="pre">xsd:datetime</span></code>: mezcla la fecha y la hora separando ambos campos con una T mayúscula. Esto permitiría almacenar <code class="docutils literal"><span class="pre">2020-09-22T10:40:22.6</span></code>.</li>
<li><code class="docutils literal"><span class="pre">xsd:duration</span></code>. Para indicar períodos. Se debe empezar con «P» y luego indicar el número de años, meses, días, minutos o segundos. Por ejemplo «P1Y4M21DT8H» indica un período de 1 año, 4 meses, 21 días y 8 horas. Se aceptan períodos negativos poniendo -P en lugar de P.</li>
<li><code class="docutils literal"><span class="pre">xsd:boolean</span></code>: acepta solo valores «true» y «false».</li>
<li><code class="docutils literal"><span class="pre">xsd:anyURI</span></code>: acepta URIs.</li>
<li><code class="docutils literal"><span class="pre">xsd:anyType</span></code>: es como la clase <code class="docutils literal"><span class="pre">Object</span></code> en Java. Será el tipo del cual heredaremos cuando no vayamos a usar ningún tipo especial como tipo padre.</li>
</ul>
<p>La figura siguiente (tomada de la web del W3C) ilustra todos los tipos así como sus relaciones de herencia:</p>
<div class="figure align-center" id="id5" style="width: 50%">
<img alt="_images/tipos_xml_schema.png" src="_images/tipos_xml_schema.png" />
<p class="caption"><span class="caption-text">Tipos en los XML Schemas</span></p>
</div>
</div>
<div class="section" id="derivaciones">
<h3>Derivaciones<a class="headerlink" href="#derivaciones" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Prácticamente en cualquier esquema XML crearemos tipos nuevos (por establecer un símil es como si programásemos clases Java). Todos nuestros tipos tienen que heredar de otros tipos pero a la hora de «heredar» tenemos más posibilidades que en Java (dondo solo tenemos el «extends»). En concreto podemos heredar de 4 formas:</p>
<ol class="arabic simple">
<li>Poniendo restricciones (<code class="docutils literal"><span class="pre">restriction</span></code>). Consiste en tomar un tipo y crear otro nuevo en el que no se puede poner cualquier valor.</li>
<li>Extendiendo un tipo (<code class="docutils literal"><span class="pre">extension</span></code>). Se toma un tipo y se crea uno nuevo añadiendo cosas a los posibles valores que pueda tomar el tipo inicial.</li>
<li>Haciendo listas (<code class="docutils literal"><span class="pre">lists</span></code>). Es como crear vectores en Java.</li>
<li>Juntando otros tipos para crear tipos complejos (<code class="docutils literal"><span class="pre">union</span></code>). Es como crear clases Java en las que añadimos atributos de tipo <code class="docutils literal"><span class="pre">int</span></code>, <code class="docutils literal"><span class="pre">String</span></code>, etc…</li>
</ol>
<p>En general, las dos derivaciones más usadas con diferencia son las restricciones y las extensiones, que se comentan por separado en los puntos siguientes.</p>
</div>
<div class="section" id="tipos-simples-y-complejos">
<h3>Tipos simples y complejos<a class="headerlink" href="#tipos-simples-y-complejos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Todo elemento de un esquema debe ser de uno de estos dos tipos.</p>
<ul>
<li><p class="first">Un elemento es de tipo simple si no permite dentro ni elementos hijo ni atributos.</p>
</li>
<li><p class="first">Un elemento es tipo complejo si permite tener dentro otras cosas (que veremos en seguida). Un tipo complejo puede a su vez tener contenido simple o contenido complejo:</p>
<blockquote>
<div><ul class="simple">
<li>Los que son de contenido simple no permiten tener dentro elementos hijo pero sí permiten atributos.</li>
<li>Los que son de contenido complejo sí permiten tener dentro elementos hijo y atributos.</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Así, por ejemplo un tipo simple que no lleve ninguna restricción se puede indicar con el campo <code class="docutils literal"><span class="pre">type</span></code> de un <code class="docutils literal"><span class="pre">element</span></code> como hacíamos antes:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:integer&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Sin embargo, si queremos indicar alguna restricción adicional ya no podremos usar el atributo <code class="docutils literal"><span class="pre">type</span></code>. Deberemos reescribir nuestro esquema así:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;xsd:simpleType&gt;</span>
    Aquí irán las restricciones, que hemos omitido por ahora.
   <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-edad-de-los-trabajadores">
<h3>Ejercicio:edad de los trabajadores<a class="headerlink" href="#ejercicio-edad-de-los-trabajadores" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se desea crear un esquema que permita validar la edad de un trabajador, que debe tener un valor entero de entre 16 y 65.</p>
<p>Por ejemplo, este XML debería validarse:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;edad&gt;</span>28<span class="nt">&lt;/edad&gt;</span>
</pre></div>
</div>
<p>Pero este no debería validarse:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;edad&gt;</span>-3<span class="nt">&lt;/edad&gt;</span>
</pre></div>
</div>
<p>La solución podría ser algo así:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
 <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;edad&quot;</span>
                 <span class="na">type=</span><span class="s">&quot;tipoEdad&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoEdad&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:integer&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:minInclusive</span> <span class="na">value=</span><span class="s">&quot;16&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:maxInclusive</span> <span class="na">value=</span><span class="s">&quot;65&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-peso-de-productos">
<h3>Ejercicio: peso de productos<a class="headerlink" href="#ejercicio-peso-de-productos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se desea crear un esquema que permita validar un elemento peso, que puede tener un valor de entre 0 y 1000 pero aceptando valores con decimales, como por ejemplo 28.88</p>
<p>Una posible solución sería:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:minInclusive</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;xsd:maxInclusive</span> <span class="na">value=</span><span class="s">&quot;1000&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-pagos-validados">
<h3>Ejercicio: pagos validados<a class="headerlink" href="#ejercicio-pagos-validados" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Crear un esquema que permita validar un elemento <code class="docutils literal"><span class="pre">pago</span></code> en el cual puede haber cantidades enteras de entre 0 y 3000 euros.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
    <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;pago&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoPago&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPago&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:integer&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:minInclusive</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;xsd:maxInclusive</span> <span class="na">value=</span><span class="s">&quot;3000&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-validacion-de-dnis">
<h3>Ejercicio: validación de DNIs<a class="headerlink" href="#ejercicio-validacion-de-dnis" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Crear un esquema que permita validar un único elemento <code class="docutils literal"><span class="pre">dni</span></code> que valide el patrón de 7-8 cifras + letra que suelen tener los DNI en España:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
    <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;dni&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoDNI&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoDNI&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[0-9]{7,8}[A-Z]&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="uniendo-la-herencia-y-el-sistema-de-tipos">
<h3>Uniendo la herencia y el sistema de tipos<a class="headerlink" href="#uniendo-la-herencia-y-el-sistema-de-tipos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Llegados a este punto ocurre lo siguiente:</p>
<ul class="simple">
<li>Por un lado tenemos que especificar si nuestros tipos serán simples o complejos (los cuales a su vez pueden ser complejos con contenido simple o complejos con contenido complejo).</li>
<li>Por otro lado se puede hacer herencia ampliando cosas (extensión) o reduciendo cosas (restricciones a los valores).</li>
</ul>
<p>Se deduce por tanto que no podemos aplicar todas las «herencias» a todos los tipos:</p>
<ol class="arabic simple">
<li>Los tipos simples no pueden tener atributos ni subelementos, por lo tanto <strong>les podremos aplicar restricciones pero nunca la extensión</strong>.</li>
<li>Los tipos complejos (independientemente del tipo de contenido) sí pueden tener otras cosas dentro por lo que <strong>les podremos aplicar tanto restricciones como extensiones</strong>.</li>
</ol>
</div>
<div class="section" id="restricciones">
<h3>Restricciones<a class="headerlink" href="#restricciones" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Como se ha dicho anteriormente la forma más común de trabajar es crear tipos que en unos casos aplicarán modificaciones en los tipos ya sea añadiendo cosas o restringiendo posibilidades. En este apartado se verá como aplicar restricciones.</p>
<p><strong>Si queremos aplicar restricciones para un tipo simple las posibles restricciones son:</strong></p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">minInclusive</span></code> para indicar el menor valor numérico permitido.</li>
<li><code class="docutils literal"><span class="pre">maxInclusive</span></code> para indicar el mayor valor numérico permitido.</li>
<li><code class="docutils literal"><span class="pre">minExclusive</span></code> para indicar el menor valor numérico que ya no estaría permitido.</li>
<li><code class="docutils literal"><span class="pre">maxExclusive</span></code> para indicar el mayor valor numérico que ya no estaría permitido.</li>
<li><code class="docutils literal"><span class="pre">totalDigits</span></code> para indicar cuantas posibles cifras se permiten.</li>
<li><code class="docutils literal"><span class="pre">fractionDigits</span></code> para indicar cuantas posibles cifras decimales se permiten.</li>
<li><code class="docutils literal"><span class="pre">length</span></code> para indicar la longitud exacta de una cadena.</li>
<li><code class="docutils literal"><span class="pre">minLength</span></code> para indicar la longitud mínima de una cadena.</li>
<li><code class="docutils literal"><span class="pre">maxLength</span></code> para indicar la longitud máxima de una cadena.</li>
<li><code class="docutils literal"><span class="pre">enumeration</span></code> para indicar los valores aceptados por una cadena.</li>
<li><code class="docutils literal"><span class="pre">pattern</span></code> para indicar la estructura aceptada por una cadena.</li>
</ul>
<p><strong>Si queremos aplicar restricciones para un tipo complejo con contenido las posibles restricciones son las mismas de antes, pero además podemos añadir el elemento &lt;attribute&gt; así como las siguientes.</strong></p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">sequence</span></code> para indicar una secuencia de elementos</li>
<li><code class="docutils literal"><span class="pre">choice</span></code> para indicar que se debe elegir un elemento de entre los que aparecen.</li>
</ul>
</div>
<div class="section" id="id4">
<h3>Atributos<a class="headerlink" href="#id4" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En primer lugar es muy importante recordar que <strong>si queremos que un elemento tenga atributos entonces ya no
se puede considerar que sea de tipo simple. Se debe usar FORZOSAMENTE un complexType</strong>. Por otro lado en los XML Schema todos los atributos <strong>son siempre opcionales, si queremos hacerlos obligatorios habrá que añadir un «required».</strong></p>
<p>Un atributo se define de la siguiente manera:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;fechanacimiento&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:date&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Esto define un atributo llamado <code class="docutils literal"><span class="pre">nombre</span></code> que aceptará solo fechas como valores válidos y que además es obligatorio poner siempre.</p>
</div>
</div>
<div class="section" id="ejercicios-de-xml-schemas">
<h2>Ejercicios de XML Schemas<a class="headerlink" href="#ejercicios-de-xml-schemas" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="cantidades-limitades">
<h3>Cantidades limitades<a class="headerlink" href="#cantidades-limitades" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Crear un esquema que permita verificar algo como lo siguiente:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad&gt;</span>20<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
<p>Se necesita que la cantidad tenga solo valores aceptables entre -30 y +30.</p>
</div>
<div class="section" id="solucion-a-las-cantidades-limitadas">
<h3>Solución a las cantidades limitadas<a class="headerlink" href="#solucion-a-las-cantidades-limitadas" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La primera pregunta que debemos hacernos es ¿necesitamos crear un tipo simple o uno complejo?. Dado que nuestro único elemento no tiene subelementos ni atributos dentro podemos afirmar que solo necesitamos un tipo simple.</p>
<p>Como aparentemente nuestro tipo necesita usar solo valores numéricos y además son muy pequeños nos vamos a limitar a usar un <code class="docutils literal"><span class="pre">short</span></code>. Sobre ese <code class="docutils literal"><span class="pre">short</span></code> pondremos una restriccion que permita indicar los valores mínimo y máximo.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xs:schema</span> <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xs:simpleType&gt;</span>
            <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">&quot;xs:short&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xs:minInclusive</span> <span class="na">value=</span><span class="s">&quot;-30&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xs:maxInclusive</span> <span class="na">value=</span><span class="s">&quot;30&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xs:restriction&gt;</span>
        <span class="nt">&lt;/xs:simpleType&gt;</span>
    <span class="nt">&lt;/xs:element&gt;</span>
<span class="nt">&lt;/xs:schema&gt;</span>
</pre></div>
</div>
<p>Este esquema dice que el elemento raíz debe ser <code class="docutils literal"><span class="pre">cantidad</span></code>. Luego indica que es un tipo simple y dentro de él indica que se va a establecer una restricción teniendo en mente que se va a «heredar» del tipo <code class="docutils literal"><span class="pre">short</span></code>. En concreto se van a poner dos restricciones, una que el valor mínimo debe ser -30 y otra que el valor máximo debe ser 30.</p>
<p>Existe una alternativa más recomendable, que es separar los elementos de los tipos. De esa manera, se pueden «reutilizar» las definiciones de tipos.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xs:schema</span> <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCantidades&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/xs:element&gt;</span>
    <span class="nt">&lt;xs:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCantidades&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">&quot;xs:short&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xs:minInclusive</span> <span class="na">value=</span><span class="s">&quot;-30&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xs:maxInclusive</span> <span class="na">value=</span><span class="s">&quot;30&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xs:restriction&gt;</span>
        <span class="nt">&lt;/xs:simpleType&gt;</span>
<span class="nt">&lt;/xs:schema&gt;</span>
</pre></div>
</div>
<p>Obsérvese que hemos puesto el tipo por separado y le hemos dado el nombre <code class="docutils literal"><span class="pre">tipoCantidades</span></code>. El elemento raíz tiene su nombre y su tipo en la misma línea.</p>
</div>
<div class="section" id="cantidades-limitadas-con-atributo-divisa">
<h3>Cantidades limitadas con atributo divisa<a class="headerlink" href="#cantidades-limitadas-con-atributo-divisa" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se desea crear un esquema para validar XML en los que haya un solo elemento raíz llamado cantidad en el que se debe poner siempre un atributo «divisa» que indique en qué moneda está una cierta cantidad. El atributo divisa siempre será una cadena y la cantidad siempre será un tipo numérico que acepte decimales (por ejemplo <code class="docutils literal"><span class="pre">float</span></code>). El esquema debe validar los archivos siguientes:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad</span> <span class="na">divisa=</span><span class="s">&quot;euro&quot;</span><span class="nt">&gt;</span>20<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad</span> <span class="na">divisa=</span><span class="s">&quot;dolar&quot;</span><span class="nt">&gt;</span>18.32<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
<p>Pero no debe validar ninguno de los siguientes:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad&gt;</span>20<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad</span> <span class="na">divisa=</span><span class="s">&quot;dolar&quot;</span><span class="nt">&gt;</span>abc<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="solucion-a-las-cantidades-limitadas-con-atributo-divisa">
<h3>Solución a las cantidades limitadas con atributo divisa<a class="headerlink" href="#solucion-a-las-cantidades-limitadas-con-atributo-divisa" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Crearemos un tipo llamado «tipoCantidad». Dicho tipo <em>ya no puede ser un simpleType ya que necesitamos que haya atributos</em>. Como no necesitamos que tenga dentro subelementos entonces este <code class="docutils literal"><span class="pre">complexType</span></code> llevará dentro un <code class="docutils literal"><span class="pre">simpleContent</span></code> (y no un <code class="docutils literal"><span class="pre">complexContent</span></code>).</p>
<p>Aparte de eso, como queremos «ampliar» un elemento para que acepte tener dentro un atributo obligatorio «cantidad» usaremos una <code class="docutils literal"><span class="pre">&lt;extension&gt;</span></code>. Así, el posible esquema sería este:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCantidad&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoCantidad&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:float&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;divisa&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="cantidades-limitadas-con-atributo-divisa-con-solo-ciertos-valores">
<h3>Cantidades limitadas con atributo divisa con solo ciertos valores<a class="headerlink" href="#cantidades-limitadas-con-atributo-divisa-con-solo-ciertos-valores" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Queremos ampliar el ejercicio anterior para evitar que ocurran errores como el siguiente:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;cantidad</span> <span class="na">divisa=</span><span class="s">&quot;aaaa&quot;</span><span class="nt">&gt;</span>18.32<span class="nt">&lt;/cantidad&gt;</span>
</pre></div>
</div>
<p>Vamos a indicar que el atributo solo puede tomar tres posibles valores: «euros», «dolares» y «yenes».</p>
</div>
<div class="section" id="solucion-al-atributo-con-solo-ciertos-valores">
<h3>Solución al atributo con solo ciertos valores<a class="headerlink" href="#solucion-al-atributo-con-solo-ciertos-valores" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Ahora tendremos que crear dos tipos. Uno para el elemento <code class="docutils literal"><span class="pre">cantidad</span></code> y otro para el atributo <code class="docutils literal"><span class="pre">divisa</span></code>. Llamaremos a estos tipos <code class="docutils literal"><span class="pre">tipoCantidad</span></code> y <code class="docutils literal"><span class="pre">tipoDivisa</span></code>.</p>
<p>La solución comentada puede encontrarse a continuación. Como puede verse, hemos includo comentarios. Pueden insertarse etiquetas <code class="docutils literal"><span class="pre">annotation</span></code> que permiten incluir anotaciones de diversos tipos, siendo la más interesante la etiqueta <code class="docutils literal"><span class="pre">documentation</span></code> que nos permite incluir comentarios.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCantidad&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:annotation&gt;</span>
        <span class="nt">&lt;xsd:documentation&gt;</span>
        A continuación creamos el tipo cantidad
        <span class="nt">&lt;/xsd:documentation&gt;</span>
    <span class="nt">&lt;/xsd:annotation&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoCantidad&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:annotation&gt;</span>
            <span class="nt">&lt;xsd:documentation&gt;</span>
            Como solo va a llevar atributos debemos
            usar un simpleContent
            <span class="nt">&lt;/xsd:documentation&gt;</span>
        <span class="nt">&lt;/xsd:annotation&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:annotation&gt;</span>
                <span class="nt">&lt;xsd:documentation&gt;</span>
                Como queremos &quot;ampliar&quot; un tipo/clase
                para que lleve atributos usaremos
                una extension
                <span class="nt">&lt;/xsd:documentation&gt;</span>
            <span class="nt">&lt;/xsd:annotation&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:float&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;divisa&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoDivisa&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:annotation&gt;</span>
        <span class="nt">&lt;xsd:documentation&gt;</span>
        Ahora tenemos que fabricar el &quot;tipoDivisa&quot; que indica
        los posibles valores válidos para una divisa. Estas
        posibilidades se crean con una &quot;enumeration&quot;. Nuestro
        tipo es un &quot;string&quot; y como vamos a restringir los posibles
        valores usaremos &quot;restriction&quot;
        <span class="nt">&lt;/xsd:documentation&gt;</span>
    <span class="nt">&lt;/xsd:annotation&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoDivisa&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;euros&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;dolares&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;yenes&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-productos-con-atributos">
<h3>Ejercicio: productos con atributos<a class="headerlink" href="#ejercicio-productos-con-atributos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se desea crear un esquema que permita validar un elemento raíz llamado <code class="docutils literal"><span class="pre">producto</span></code> de tipo <code class="docutils literal"><span class="pre">xsd:string</span></code>. El producto tiene dos atributos:</p>
<ul class="simple">
<li>Un atributo se llamará <code class="docutils literal"><span class="pre">cantidad</span></code> y es obligatorio. Debe aceptar solo enteros positivos.</li>
<li>También habrá un atributo llamado <code class="docutils literal"><span class="pre">unidad</span></code> que solo acepta los <code class="docutils literal"><span class="pre">xsd:string</span></code> «cajas» y «pales».</li>
</ul>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
    <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;producto&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoProducto&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoProducto&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:simpleContent&gt;</span>
      <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;cantidad&quot;</span>
              <span class="na">type=</span><span class="s">&quot;xsd:unsignedInt&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;unidad&quot;</span>
              <span class="na">type=</span><span class="s">&quot;tipoUnidad&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/xsd:extension&gt;</span>
    <span class="nt">&lt;/xsd:simpleContent&gt;</span>
  <span class="nt">&lt;/xsd:complexType&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoUnidad&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;caja&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;pale&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-clientes-con-informacion-adicional">
<h3>Ejercicio: clientes con información adicional<a class="headerlink" href="#ejercicio-clientes-con-informacion-adicional" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se desea crear un esquema XML que permita validar un elemento llamado <code class="docutils literal"><span class="pre">cliente</span></code> que puede almacenar un <code class="docutils literal"><span class="pre">xsd:string</span></code>. El cliente contiene:</p>
<ul class="simple">
<li>Un atributo obligatorio llamado <code class="docutils literal"><span class="pre">codigo</span></code> que contiene el código del cliente, que siempre consta de tres letras mayúsculas de tres números.</li>
<li>Un atributo optativo llamado <code class="docutils literal"><span class="pre">habitual</span></code> que se usará para saber si es un cliente habitual o no. Acepta valores «true» y «false».</li>
<li>Un atributo optativo llamado <code class="docutils literal"><span class="pre">cantidad</span></code> que indica su compra. Es un entero con valores de entre 0 y 1000.</li>
</ul>
</div>
<div class="section" id="lista-de-clientes-como-xml-schemas">
<h3>Lista de clientes como XML Schemas<a class="headerlink" href="#lista-de-clientes-como-xml-schemas" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En este apartado volveremos a ver un problema que ya resolvíamos con DTD: supongamos que en nuestros ficheros deseamos indicar que el elemento raíz es <code class="docutils literal"><span class="pre">&lt;listaclientes&gt;</span></code>. Dentro de <code class="docutils literal"><span class="pre">&lt;listaclientes&gt;</span></code> deseamos permitir uno o más elementos <code class="docutils literal"><span class="pre">&lt;cliente&gt;</span></code>. Dentro de <code class="docutils literal"><span class="pre">&lt;cliente&gt;</span></code> todos deberán tener <code class="docutils literal"><span class="pre">&lt;cif&gt;</span></code> y <code class="docutils literal"><span class="pre">&lt;nombre&gt;</span></code> y en ese orden. Dentro de <code class="docutils literal"><span class="pre">&lt;cliente&gt;</span></code> puede aparecer o no un elemento <code class="docutils literal"><span class="pre">&lt;diasentrega&gt;</span></code> para indicar que ese cliente exige un máximo de plazo. Como no todo el mundo usa plazos el <code class="docutils literal"><span class="pre">&lt;diasentrega&gt;</span></code> es optativo.</p>
<p>Vayamos paso a paso. Primero decimos como se llama el elemento raíz y de qué tipo es:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaclientes&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Ahora queda definir el tipo <code class="docutils literal"><span class="pre">tipoListaClientes</span></code>. Este tipo va a contener un elemento (por lo que ya sabemos que es un <code class="docutils literal"><span class="pre">complexType</span></code> con <code class="docutils literal"><span class="pre">complexContent</span></code> dentro), y en concreto queremos que sea un solo elemento llamado <code class="docutils literal"><span class="pre">cliente</span></code>, es decir <strong>queremos imponer una restricción</strong>. Aunque queramos un solo elemento tendremos que indicar una restricción. Como queremos permitir que el elemento pueda aparecer muchas veces utilizaremos un <code class="docutils literal"><span class="pre">maxOccurs</span></code> con el valor <code class="docutils literal"><span class="pre">unbounded</span></code>.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaclientes&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cliente&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCliente&quot;</span>
                <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Definamos ahora el tipo <code class="docutils literal"><span class="pre">tipoCliente</span></code>. Dicho tipo <strong>necesita tener subelementos dentro</strong> así que evidentemente va a ser de tipo complejo. La pregunta es ¿es «tipo complejo con contenido simple» o «tipo complejo con contenido complejo»?. Si lo hiciéramos de «tipo complejo con contenido simple» podríamos tener atributos pero no subelementos, así que forzosamente tendrá que ser de un «tipo complejo con contenido complejo». Igual que antes impondremos una restricciones que es permitir solo que aparezcan ciertos elementos en cierto orden. El elemento <code class="docutils literal"><span class="pre">plazo</span></code> lo haremos optativo.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaclientes&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cliente&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCliente&quot;</span>
                    <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoCliente&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cif&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;nombre&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;plazo&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span>
                    <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Si ahora probamos este XML veremos que el fichero se valida perfectamente a pesar de que es evidente que tiene errores. Es lógico, dado que no hemos aprovechado a fondo el sistema de tipos de XML para evitar que nadie suministre datos incorrectos en un XML. Dicha mejora la dejaremos para el siguiente ejercicio.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
    <span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;cif&gt;</span>dd<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>20<span class="nt">&lt;/nombre&gt;</span>
    <span class="nt">&lt;/cliente&gt;</span>
    <span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;cif&gt;</span>dd<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>20<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;plazo&gt;</span>ABCD<span class="nt">&lt;/plazo&gt;</span>
    <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ampliacion-del-esquema-para-clientes">
<h3>Ampliación del esquema para clientes<a class="headerlink" href="#ampliacion-del-esquema-para-clientes" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Ahora ampliaremos el XML Schema del fichero anterior para que nadie suministre información incorrecta.</p>
<p>En concreto tenemos tres datos:</p>
<ol class="arabic simple">
<li>El CIF, que vamos a presuponer que siempre tiene 8 cifras y al final una letra mayúsculas. Si alguna empresa tiene 7 cifras deberá incluir un 0 extra.</li>
<li>El nombre, que puede ser una cadena cualquiera.</li>
<li>El plazo, que debería ser un número positivo válido.</li>
</ol>
<p>Ahora, el fichero anterior no debería ser validado por el validador, pero sí debería serlo un fichero como este.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
    <span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;cif&gt;</span>01234567D<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Juan Sanchez<span class="nt">&lt;/nombre&gt;</span>
    <span class="nt">&lt;/cliente&gt;</span>
    <span class="nt">&lt;cliente&gt;</span>
        <span class="nt">&lt;cif&gt;</span>05676554A<span class="nt">&lt;/cif&gt;</span>
        <span class="nt">&lt;nombre&gt;</span>Pedro Diaz<span class="nt">&lt;/nombre&gt;</span>
        <span class="nt">&lt;plazo&gt;</span>45<span class="nt">&lt;/plazo&gt;</span>
    <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>La solución a los tres problemas indicados antes sería la siguiente:</p>
<ol class="arabic simple">
<li>El nombre puede ser una cadena cualquiera, por lo que tendrá que seguir siendo de tipo <code class="docutils literal"><span class="pre">xsd:string</span></code>. Eso significa que si alguien introdujese un número en el nombre el fichero seguiría validándose. Por desgracia dicho problema no se puede resolver.</li>
<li>El plazo debería ser un número. Le asignaremos un tipo <code class="docutils literal"><span class="pre">xsd:unsignedInt</span></code>.</li>
<li>El CIF es más complejo. Deberemos crear un tipo nuevo y establecer una restricción a los posibles valores que puede tomar.</li>
</ol>
<p>Así, una posible solución sería esta:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaclientes&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoListaClientes&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cliente&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCliente&quot;</span>
                        <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>

    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoCliente&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:sequence&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cif&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCif&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;nombre&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;plazo&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:unsignedInt&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCif&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[0-9]{8}[A-Z]&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPlazo&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:unsignedInt&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-lista-de-codigos">
<h3>Ejercicio: lista de códigos<a class="headerlink" href="#ejercicio-lista-de-codigos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se nos pide crear un esquema que permita validar un fichero como el siguiente:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listacodigos&gt;</span>
  <span class="nt">&lt;codigo&gt;</span>AAA2DD<span class="nt">&lt;/codigo&gt;</span>
  <span class="nt">&lt;codigo&gt;</span>BBB2EE<span class="nt">&lt;/codigo&gt;</span>
  <span class="nt">&lt;codigo&gt;</span>BBB2EE<span class="nt">&lt;/codigo&gt;</span>
<span class="nt">&lt;/listacodigos&gt;</span>
</pre></div>
</div>
<p>En concreto, todo código tiene la estructura siguiente:</p>
<ol class="arabic simple">
<li>Primero van tres mayúsculas</li>
<li>Despues va exactamente un digito.</li>
<li>Por último hay exactamente dos mayúsculas.</li>
</ol>
<p>Un posible esquema XML sería el siguiente (obsérvese como usamos <code class="docutils literal"><span class="pre">maxOccurs</span></code> para indicar que el elemento puede repetirse un máximo de «infitas veces»:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
    <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listacodigos&quot;</span>
               <span class="na">type=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
      <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:sequence&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;codigo&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;tipoCodigo&quot;</span>
                       <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:sequence&gt;</span>
      <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
  <span class="nt">&lt;/xsd:complexType&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[A-Z]{3}[0-9][A-Z]{2}&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-otra-lista-de-clientes">
<h3>Ejercicio: otra lista de clientes<a class="headerlink" href="#ejercicio-otra-lista-de-clientes" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Ahora se nos pide crear un esquema que permita validar un fichero como el siguiente, en el que hay una lista de clientes y el nombre es optativo, aunque los apellidos son obligatorios:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listaclientes&gt;</span>
  <span class="nt">&lt;cliente&gt;</span>
    <span class="nt">&lt;nombre&gt;</span>Juan<span class="nt">&lt;/nombre&gt;</span>
    <span class="nt">&lt;apellidos&gt;</span>Sanchez<span class="nt">&lt;/apellidos&gt;</span>
  <span class="nt">&lt;/cliente&gt;</span>
  <span class="nt">&lt;cliente&gt;</span>
    <span class="nt">&lt;nombre&gt;</span>Jose<span class="nt">&lt;/nombre&gt;</span>
    <span class="nt">&lt;apellidos&gt;</span>Diaz<span class="nt">&lt;/apellidos&gt;</span>
  <span class="nt">&lt;/cliente&gt;</span>
<span class="nt">&lt;/listaclientes&gt;</span>
</pre></div>
</div>
<p>La solución puede ser algo así:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
  <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaclientes&quot;</span>
               <span class="na">type=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
      <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:sequence&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;cliente&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;tipoCliente&quot;</span>
                       <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:sequence&gt;</span>
      <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
  <span class="nt">&lt;/xsd:complexType&gt;</span>

  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoCliente&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
      <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:sequence&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;nombre&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span>
                       <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;apellidos&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:sequence&gt;</span>
      <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:complexContent&gt;</span>
  <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-listas-de-productos">
<h3>Ejercicio: listas de productos<a class="headerlink" href="#ejercicio-listas-de-productos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se pide validar correctamente algo como esto:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listaproductos&gt;</span>
  <span class="nt">&lt;producto</span> <span class="na">codigo=</span><span class="s">&quot;DX-22&quot;</span><span class="nt">&gt;</span><span class="c">&lt;!--Codigo obligatorio--&gt;</span>
    <span class="nt">&lt;descripcion&gt;</span>Ordenador<span class="nt">&lt;/descripcion&gt;</span><span class="c">&lt;!--Optativa--&gt;</span>
    <span class="nt">&lt;peso&gt;</span>23.44<span class="nt">&lt;/peso&gt;</span><span class="c">&lt;!--Positivo con decimales--&gt;</span>
  <span class="nt">&lt;/producto&gt;</span>
  <span class="nt">&lt;producto</span> <span class="na">codigo=</span><span class="s">&quot;CX-124&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;peso&gt;</span>17.50<span class="nt">&lt;/peso&gt;</span>
  <span class="nt">&lt;/producto&gt;</span>
  <span class="nt">&lt;producto</span> <span class="na">codigo=</span><span class="s">&quot;CX-124&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;peso&gt;</span>17.50<span class="nt">&lt;/peso&gt;</span>
  <span class="nt">&lt;/producto&gt;</span>
<span class="nt">&lt;/listaproductos&gt;</span>
</pre></div>
</div>
<p>Las reglas son:</p>
<ol class="arabic simple">
<li>Una lista de productos puede tener dentro muchos productos.</li>
<li>Todo producto tiene un «codigo» cuya estructura <em>dos mayúsculas seguidas de un guión seguido de dos o tres cifras</em></li>
<li>Todo producto <em>puede tener (optativo)</em> un elemento descripción que es de tipo texto.</li>
<li>Todo producto <strong>debe tener</strong> un elemento peso que debe aceptar decimales pero que nunca puede ser negativo, es decir su valor mínimo es 0</li>
</ol>
<p>La solución se muestra a continuación:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span>
  <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listaproductos&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
      <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:sequence&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;producto&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;tipoProducto&quot;</span>
                       <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:sequence&gt;</span>
      <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
  <span class="nt">&lt;/xsd:complexType&gt;</span>
  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoProducto&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
      <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:sequence&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;descripcion&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span>
                       <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>

        <span class="nt">&lt;/xsd:sequence&gt;</span>
        <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;codigo&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;tipoCodigo&quot;</span>
                       <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
  <span class="nt">&lt;/xsd:complexType&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:minInclusive</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
  <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[A-Z]{2}-[0-9]{2,3}&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
  <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-validacion-de-componentes">
<h3>Ejercicio: validación de componentes<a class="headerlink" href="#ejercicio-validacion-de-componentes" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Validar un fichero como este:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;listacomponentes&gt;</span>
  <span class="nt">&lt;componente&gt;</span>
    <span class="nt">&lt;tarjetagrafica&gt;</span>
      <span class="nt">&lt;memoria&gt;</span>2GB<span class="nt">&lt;/memoria&gt;</span>
      <span class="nt">&lt;precio</span> <span class="na">moneda=</span><span class="s">&quot;euros&quot;</span><span class="nt">&gt;</span>190<span class="nt">&lt;/precio&gt;</span>
    <span class="nt">&lt;/tarjetagrafica&gt;</span>
  <span class="nt">&lt;/componente&gt;</span>
  <span class="nt">&lt;componente</span> <span class="na">codigo=</span><span class="s">&quot;123456&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;monitor&gt;</span>
      <span class="nt">&lt;tamanio&gt;</span>14<span class="nt">&lt;/tamanio&gt;</span>
      <span class="nt">&lt;precio</span> <span class="na">moneda=</span><span class="s">&quot;euros&quot;</span><span class="nt">&gt;</span>99.49<span class="nt">&lt;/precio&gt;</span>
    <span class="nt">&lt;/monitor&gt;</span>
  <span class="nt">&lt;/componente&gt;</span>
<span class="nt">&lt;/listacomponentes&gt;</span>
</pre></div>
</div>
<p>Las reglas son las siguientes:</p>
<ol class="arabic simple">
<li>El elemento raíz se llama <code class="docutils literal"><span class="pre">listacomponentes</span></code>.</li>
<li>Dentro de él puede haber uno o más elementos <code class="docutils literal"><span class="pre">componente</span></code></li>
<li>Un componente puede ser una <code class="docutils literal"><span class="pre">tarjetagrafica</span></code> o un <code class="docutils literal"><span class="pre">monitor</span></code>.</li>
<li>Un componente puede tener un atributo llamado <code class="docutils literal"><span class="pre">codigo</span></code> cuya estructura es siempre un dígito de 6 cifras.</li>
<li>Una tarjeta gráfica siempre tiene dos elementos llamados <code class="docutils literal"><span class="pre">memoria</span></code> y <code class="docutils literal"><span class="pre">precio</span></code>.</li>
<li>La memoria siempre es una cifra seguido de GB o TB.</li>
<li>El tamaño del monitor siempre es un entero positivo.</li>
<li>El precio siempre es una cantidad positiva con decimales. El precio siempre lleva un atributo <code class="docutils literal"><span class="pre">moneda</span></code> que solo puede valer «euros» o «dolares» y que se utiliza para saber en qué moneda está el precio.</li>
</ol>
<p>La solución se muestra a continuación:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;listacomponentes&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoLista&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;componente&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoComponente&quot;</span>
                                 <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoComponente&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:choice&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;tarjetagrafica&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoTarjeta&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;monitor&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoMonitor&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:choice&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;codigo&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoCodigo&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[1-9][0-9]{5}&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoTarjeta&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;memoria&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoMemoria&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;precio&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoPrecio&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoMemoria&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">&quot;[0-9]+[GT]B&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="c">&lt;!--Aqui definimos un precio con restriccion del cual</span>
<span class="c">    heredaremos despues para añadir el atributo a</span>
<span class="c">    la cantidad--&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPrecioRestringido&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:minInclusive</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="c">&lt;!--Aqui heredamos del tipo anterior y añadimos</span>
<span class="c">    el atributo--&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoPrecio&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;tipoPrecioRestringido&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;moneda&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoMoneda&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>


    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoMoneda&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;euros&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;dolares&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoMonitor&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;tamanio&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:integer&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;precio&quot;</span>  <span class="na">type=</span><span class="s">&quot;tipoPrecio&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-inventario">
<h3>Ejercicio: inventario<a class="headerlink" href="#ejercicio-inventario" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Varios administradores necesitan intercambiar información sobre inventario de material de oficina. Para ello, han llegado a un acuerdo sobre lo que se permite en un fichero XML de inventario. La idea básica es permitir ficheros como este:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;inventario&gt;</span>
    <span class="nt">&lt;objeto&gt;</span>
        <span class="nt">&lt;mesa&gt;</span>
            <span class="nt">&lt;peso&gt;</span>4.55<span class="nt">&lt;/peso&gt;</span>
            <span class="nt">&lt;superficie</span> <span class="na">unidad=</span><span class="s">&quot;cm2&quot;</span><span class="nt">&gt;</span>100<span class="nt">&lt;/superficie&gt;</span>
        <span class="nt">&lt;/mesa&gt;</span>
    <span class="nt">&lt;/objeto&gt;</span>
    <span class="nt">&lt;objeto&gt;</span>
        <span class="nt">&lt;silla&gt;</span>
            <span class="nt">&lt;peso&gt;</span>3.50<span class="nt">&lt;/peso&gt;</span>
        <span class="nt">&lt;/silla&gt;</span>
    <span class="nt">&lt;/objeto&gt;</span>
<span class="nt">&lt;/inventario&gt;</span>
</pre></div>
</div>
<p>Las reglas concretas son estas:</p>
<ol class="arabic simple">
<li>Dentro de <code class="docutils literal"><span class="pre">&lt;objeto&gt;</span></code> puede haber uno de estos dos elementos hijo: un elemento <code class="docutils literal"><span class="pre">&lt;mesa&gt;</span></code> o un elemento <code class="docutils literal"><span class="pre">&lt;silla&gt;</span></code>.</li>
<li>Toda mesa tiene un elemento hijo <code class="docutils literal"><span class="pre">&lt;peso&gt;</span></code>. El peso siempre es un decimal positivo con dos cifras decimales.</li>
<li>Toda mesa tiene una <code class="docutils literal"><span class="pre">&lt;superficie&gt;</span></code>. La superficie es un <code class="docutils literal"><span class="pre">unsignedInt</span></code>. La superficie siempre tiene un atributo que puede ser solo una de estas dos cadenas: <code class="docutils literal"><span class="pre">m2</span></code> o <code class="docutils literal"><span class="pre">cm2</span></code>.</li>
<li>Toda silla tiene siempre un <code class="docutils literal"><span class="pre">&lt;peso&gt;</span></code> y las reglas de ese peso son exactamente las mismas que las reglas de <code class="docutils literal"><span class="pre">&lt;peso&gt;</span></code> del elemento <code class="docutils literal"><span class="pre">&lt;mesa&gt;</span></code></li>
</ol>
<p>La solución podría descomponerse de la forma siguiente:</p>
<p>Resolvamos primero el problema de crear un tipo para el elemento <code class="docutils literal"><span class="pre">&lt;peso&gt;</span></code>.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                 <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;&lt;/xsd:element&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:minInclusive</span>  <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:fractionDigits</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Ahora resolvamos el problema del elemento <code class="docutils literal"><span class="pre">&lt;silla&gt;</span></code>. Para resolverlo, podemos aprovechar el tipo <code class="docutils literal"><span class="pre">tipoPeso</span></code> que acabamos de crear:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;silla&quot;</span>
                 <span class="na">type=</span><span class="s">&quot;tipoSilla&quot;</span><span class="nt">&gt;&lt;/xsd:element&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:minInclusive</span>  <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:fractionDigits</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSilla&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                             <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Ahora resolveremos el problema de la superficie:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;superficie&quot;</span>
                 <span class="na">type=</span><span class="s">&quot;tipoSuperficie&quot;</span><span class="nt">&gt;&lt;/xsd:element&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:minInclusive</span>  <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:fractionDigits</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSilla&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                             <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSuperficie&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:unsignedInt&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;unidad&quot;</span>
                           <span class="na">type=</span><span class="s">&quot;tipoUnidad&quot;</span>
                           <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoUnidad&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;m2&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;cm2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Y apoyándonos en eso haremos la mesa:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;mesa&quot;</span>
                 <span class="na">type=</span><span class="s">&quot;tipoMesa&quot;</span><span class="nt">&gt;&lt;/xsd:element&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:minInclusive</span>  <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:fractionDigits</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSilla&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                             <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSuperficie&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:unsignedInt&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;unidad&quot;</span>
                           <span class="na">type=</span><span class="s">&quot;tipoUnidad&quot;</span>
                           <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoUnidad&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;m2&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;cm2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoMesa&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;superficie&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoSuperficie&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
<p>Y ya solo queda indicar que un inventario es una lista de objetos (pondremos el <code class="docutils literal"><span class="pre">maxOccurs</span></code> a <code class="docutils literal"><span class="pre">unbounded</span></code>) e indicaremos que un objeto puede ser una elección (<code class="docutils literal"><span class="pre">&lt;xsd:choice&gt;</span></code>) entre dos tipos de objetos.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;inventario&quot;</span>
             <span class="na">type=</span><span class="s">&quot;tipoInventario&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:minInclusive</span>  <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;xsd:fractionDigits</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
<span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSilla&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:sequence&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                         <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:sequence&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoSuperficie&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:simpleContent&gt;</span>
        <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:unsignedInt&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;unidad&quot;</span>
                       <span class="na">type=</span><span class="s">&quot;tipoUnidad&quot;</span>
                       <span class="na">use=</span><span class="s">&quot;required&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:extension&gt;</span>
    <span class="nt">&lt;/xsd:simpleContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoUnidad&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;m2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;cm2&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsd:restriction&gt;</span>
<span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoMesa&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:sequence&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;peso&quot;</span>
                             <span class="na">type=</span><span class="s">&quot;tipoPeso&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;superficie&quot;</span>
                             <span class="na">type=</span><span class="s">&quot;tipoSuperficie&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:sequence&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoInventario&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:sequence&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;objeto&quot;</span>
                             <span class="na">type=</span><span class="s">&quot;tipoObjeto&quot;</span>
                             <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:sequence&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoObjeto&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:complexContent&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:choice&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;mesa&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoMesa&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;silla&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoSilla&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:choice&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:complexContent&gt;</span>
<span class="nt">&lt;/xsd:complexType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ejercicio-tipo-examen">
<h2>Ejercicio tipo examen<a class="headerlink" href="#ejercicio-tipo-examen" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Se necesita crear un esquema que controle la correcta sintaxis de ficheros con este estilo:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;productosfinancieros&gt;</span>
    <span class="nt">&lt;producto&gt;</span>
        <span class="nt">&lt;bono&gt;</span>
            <span class="nt">&lt;valoractual</span> <span class="na">moneda=</span><span class="s">&quot;yenes&quot;</span><span class="nt">&gt;</span>2.212<span class="nt">&lt;/valoractual&gt;</span>
            <span class="nt">&lt;beneficio&gt;</span>-2.83<span class="nt">&lt;/beneficio&gt;</span>
        <span class="nt">&lt;/bono&gt;</span>
    <span class="nt">&lt;/producto&gt;</span>
    <span class="nt">&lt;producto&gt;</span>
        <span class="nt">&lt;futuro&gt;</span>
            <span class="nt">&lt;elemento</span> <span class="na">idioma=</span><span class="s">&quot;espanol&quot;</span><span class="nt">&gt;</span>Petroleo<span class="nt">&lt;/elemento&gt;</span>
            <span class="nt">&lt;beneficio&gt;</span>-3.83<span class="nt">&lt;/beneficio&gt;</span>
        <span class="nt">&lt;/futuro&gt;</span>
    <span class="nt">&lt;/producto&gt;</span>
    <span class="nt">&lt;producto&gt;</span>
        <span class="nt">&lt;acciones&gt;</span>
            <span class="nt">&lt;empresa</span> <span class="na">pais=</span><span class="s">&quot;usa&quot;</span><span class="nt">&gt;</span>ENRON<span class="nt">&lt;/empresa&gt;</span>
            <span class="nt">&lt;beneficio&gt;</span>2.91<span class="nt">&lt;/beneficio&gt;</span>
        <span class="nt">&lt;/acciones&gt;</span>
    <span class="nt">&lt;/producto&gt;</span>
<span class="nt">&lt;/productosfinancieros&gt;</span>
</pre></div>
</div>
<p>Las reglas concretas son las siguientes:</p>
<ol class="arabic simple">
<li>El elemento raíz es <code class="docutils literal"><span class="pre">&lt;productosfinancieros&gt;</span></code>. Dentro de él debe haber uno o más elementos <code class="docutils literal"><span class="pre">&lt;producto&gt;</span></code>.</li>
<li>Un <code class="docutils literal"><span class="pre">&lt;producto&gt;</span></code> puede ser de tres tipos: <code class="docutils literal"><span class="pre">&lt;bono&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;futuro&gt;</span></code> y <code class="docutils literal"><span class="pre">&lt;acciones&gt;</span></code>.</li>
<li>Todos los productos tienen siempre un elemento hijo llamado <code class="docutils literal"><span class="pre">&lt;beneficio&gt;</span></code> que puede ser un número con dos decimales (puede ser positivo o negativo).</li>
<li>Todo <code class="docutils literal"><span class="pre">&lt;bono&gt;</span></code> puede tener dentro un elemento llamado <code class="docutils literal"><span class="pre">&lt;valoractual&gt;</span></code> que contiene un valor decimal que puede ser positivo o negativo y tener o no decimales. El elemento <code class="docutils literal"><span class="pre">&lt;valoractual&gt;</span></code> deberá llevar dentro un atributo llamado <code class="docutils literal"><span class="pre">moneda</span></code> que solo puede tomar los valores <code class="docutils literal"><span class="pre">dolares</span></code>, <code class="docutils literal"><span class="pre">euros</span></code> o <code class="docutils literal"><span class="pre">yenes</span></code>.</li>
<li>Todo <code class="docutils literal"><span class="pre">&lt;futuro&gt;</span></code> tiene un hijo llamado <code class="docutils literal"><span class="pre">&lt;elemento&gt;</span></code> que puede contener dentro cadenas de cualquier tipo. Para saber en qué idioma está la cadena se usa un atributo llamado <code class="docutils literal"><span class="pre">idioma</span></code> que indica el idioma en el que está escrita la cadena.</li>
<li>Las acciones siempre tienen un elemento <code class="docutils literal"><span class="pre">&lt;empresa&gt;</span></code> que indica el nombre de la empresa y un atributo llamado <code class="docutils literal"><span class="pre">país</span></code> que indica de donde es la empresa. De momento queremos limitarnos a los países <code class="docutils literal"><span class="pre">usa</span></code>, <code class="docutils literal"><span class="pre">alemania</span></code>, <code class="docutils literal"><span class="pre">japon</span></code> y <code class="docutils literal"><span class="pre">espana</span></code>.</li>
</ol>
<p>Recuérdese que siempre que no nos digan nada, se supone que un elemento o atributo es <strong>obligatorio</strong>. Si algo es optativo nos dirán «puede tener dentro», «puede contener», «puede aparecer», etc…</p>
<p>Una posible solución sería esta:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;productosfinancieros&quot;</span>
                 <span class="na">type=</span><span class="s">&quot;tipoProductosFinancieros&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoProductosFinancieros&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;producto&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoProducto&quot;</span>
                                 <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoProducto&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:choice&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;bono&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoBono&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;futuro&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoFuturo&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;acciones&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoAcciones&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:choice&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoBono&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;valoractual&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoValorActual&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;beneficio&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoBeneficio&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoValorActual&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;moneda&quot;</span> <span class="na">type=</span><span class="s">&quot;tipoMoneda&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoMoneda&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;dolares&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;euros&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;yenes&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoBeneficio&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:decimal&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:fractionDigits</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoFuturo&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;elemento&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoElemento&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;beneficio&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoBeneficio&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="c">&lt;!--No nos dicen nada sobre los posibles idiomas,</span>
<span class="c">    así que podemos asumir que el idioma será una cadena cualquiera--&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoElemento&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;idioma&quot;</span>
                               <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoAcciones&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:complexContent&gt;</span>
            <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:anyType&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:sequence&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;empresa&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoEmpresa&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;beneficio&quot;</span>
                                 <span class="na">type=</span><span class="s">&quot;tipoBeneficio&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/xsd:sequence&gt;</span>
            <span class="nt">&lt;/xsd:restriction&gt;</span>
        <span class="nt">&lt;/xsd:complexContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;tipoEmpresa&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:simpleContent&gt;</span>
            <span class="nt">&lt;xsd:extension</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;xsd:attribute</span> <span class="na">name=</span><span class="s">&quot;pais&quot;</span>
                               <span class="na">type=</span><span class="s">&quot;tipoPais&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/xsd:extension&gt;</span>
        <span class="nt">&lt;/xsd:simpleContent&gt;</span>
    <span class="nt">&lt;/xsd:complexType&gt;</span>
    <span class="nt">&lt;xsd:simpleType</span> <span class="na">name=</span><span class="s">&quot;tipoPais&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;alemania&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;japon&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;espania&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;xsd:enumeration</span> <span class="na">value=</span><span class="s">&quot;usa&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
    <span class="nt">&lt;/xsd:simpleType&gt;</span>
<span class="nt">&lt;/xsd:schema&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ejercicio-tipo-examen-ii">
<h2>Ejercicio tipo examen (II)<a class="headerlink" href="#ejercicio-tipo-examen-ii" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Crear una DTD que permita validar un fichero como el siguiente:</p>
<p>Las reglas son las siguientes:</p>
<ul class="simple">
<li>El elemento raíz es <code class="docutils literal"><span class="pre">&lt;inventario&gt;</span></code>.</li>
<li>Dentro de <code class="docutils literal"><span class="pre">&lt;inventario&gt;</span></code> debe haber una <code class="docutils literal"><span class="pre">&lt;mesa&gt;</span></code> o un <code class="docutils literal"><span class="pre">&lt;ordenador&gt;</span></code>.</li>
<li>Dentro de mesa puede haber (o no) un primer elemento <code class="docutils literal"><span class="pre">&lt;tipo&gt;</span></code>. Despues debe haber un elemento <code class="docutils literal"><span class="pre">&lt;localizacion&gt;</span></code>.</li>
<li>Dentro de ordenador puede haber 3 elementos optativos pero que de aparecer lo hacen en el siguiente orden.</li>
<li>Primero un elemento <code class="docutils literal"><span class="pre">&lt;procesador&gt;</span></code> que puede llevar un atributo <code class="docutils literal"><span class="pre">fabricante</span></code>.</li>
<li>Despues un elemento <code class="docutils literal"><span class="pre">&lt;memoria&gt;</span></code> que debe llevar obligatoriamente un atributo <code class="docutils literal"><span class="pre">unidad</span></code>.</li>
<li>Despues un elemento <code class="docutils literal"><span class="pre">&lt;discoduro&gt;</span></code>.</li>
</ul>
</div>
<div class="section" id="examen">
<h2>Examen<a class="headerlink" href="#examen" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El examen de este tema tendrá lugar el miércoles 22 de marzo de 2017.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Tabla de Contenidos</a></h3>
  <ul>
<li><a class="reference internal" href="#">XML</a><ul>
<li><a class="reference internal" href="#introduccion">Introducción</a></li>
<li><a class="reference internal" href="#un-ejemplo-sencillo">Un ejemplo sencillo</a></li>
<li><a class="reference internal" href="#construccion-de-xml">Construcción de XML</a></li>
<li><a class="reference internal" href="#validez">Validez</a></li>
<li><a class="reference internal" href="#gramaticas">Gramáticas</a><ul>
<li><a class="reference internal" href="#sintaxis-dtd">Sintaxis DTD</a></li>
<li><a class="reference internal" href="#ejemplo-de-dtd-productos">Ejemplo de DTD (productos)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ejercicio-i-dtd">Ejercicio I (DTD)</a></li>
<li><a class="reference internal" href="#ejercicio-ii-dtd">Ejercicio II (DTD)</a><ul>
<li><a class="reference internal" href="#solucion">Solución</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ejercicio-con-atributos">Ejercicio (con atributos)</a><ul>
<li><a class="reference internal" href="#solucion-ejercicio-con-atributos">Solución ejercicio con atributos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ejercicio">Ejercicio</a><ul>
<li><a class="reference internal" href="#solucion-completa">Solución completa</a></li>
</ul>
</li>
<li><a class="reference internal" href="#otras-caracteristicas-de-xml">Otras características de XML</a><ul>
<li><a class="reference internal" href="#atributos">Atributos</a></li>
<li><a class="reference internal" href="#elementos-vacios">Elementos vacíos</a></li>
<li><a class="reference internal" href="#alternativas">Alternativas</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1">Ejercicio</a><ul>
<li><a class="reference internal" href="#id2">Solución</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ejercicio-mayorista-de-libros">Ejercicio: mayorista de libros</a><ul>
<li><a class="reference internal" href="#solucion-al-mayorista-de-libros">Solución al mayorista de libros</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ejercicio-fabricante-de-tractores">Ejercicio: fabricante de tractores</a></li>
<li><a class="reference internal" href="#ejercicio-repeticiones-de-opciones">Ejercicio: repeticiones de opciones</a></li>
<li><a class="reference internal" href="#ejercicio-multinacional">Ejercicio: multinacional</a></li>
<li><a class="reference internal" href="#id3">Ejercicio</a></li>
<li><a class="reference internal" href="#esquemas-xml">Esquemas XML</a><ul>
<li><a class="reference internal" href="#un-ejemplo">Un ejemplo</a></li>
<li><a class="reference internal" href="#tipos-de-datos-basicos">Tipos de datos básicos</a></li>
<li><a class="reference internal" href="#derivaciones">Derivaciones</a></li>
<li><a class="reference internal" href="#tipos-simples-y-complejos">Tipos simples y complejos</a></li>
<li><a class="reference internal" href="#ejercicio-edad-de-los-trabajadores">Ejercicio:edad de los trabajadores</a></li>
<li><a class="reference internal" href="#ejercicio-peso-de-productos">Ejercicio: peso de productos</a></li>
<li><a class="reference internal" href="#ejercicio-pagos-validados">Ejercicio: pagos validados</a></li>
<li><a class="reference internal" href="#ejercicio-validacion-de-dnis">Ejercicio: validación de DNIs</a></li>
<li><a class="reference internal" href="#uniendo-la-herencia-y-el-sistema-de-tipos">Uniendo la herencia y el sistema de tipos</a></li>
<li><a class="reference internal" href="#restricciones">Restricciones</a></li>
<li><a class="reference internal" href="#id4">Atributos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ejercicios-de-xml-schemas">Ejercicios de XML Schemas</a><ul>
<li><a class="reference internal" href="#cantidades-limitades">Cantidades limitades</a></li>
<li><a class="reference internal" href="#solucion-a-las-cantidades-limitadas">Solución a las cantidades limitadas</a></li>
<li><a class="reference internal" href="#cantidades-limitadas-con-atributo-divisa">Cantidades limitadas con atributo divisa</a></li>
<li><a class="reference internal" href="#solucion-a-las-cantidades-limitadas-con-atributo-divisa">Solución a las cantidades limitadas con atributo divisa</a></li>
<li><a class="reference internal" href="#cantidades-limitadas-con-atributo-divisa-con-solo-ciertos-valores">Cantidades limitadas con atributo divisa con solo ciertos valores</a></li>
<li><a class="reference internal" href="#solucion-al-atributo-con-solo-ciertos-valores">Solución al atributo con solo ciertos valores</a></li>
<li><a class="reference internal" href="#ejercicio-productos-con-atributos">Ejercicio: productos con atributos</a></li>
<li><a class="reference internal" href="#ejercicio-clientes-con-informacion-adicional">Ejercicio: clientes con información adicional</a></li>
<li><a class="reference internal" href="#lista-de-clientes-como-xml-schemas">Lista de clientes como XML Schemas</a></li>
<li><a class="reference internal" href="#ampliacion-del-esquema-para-clientes">Ampliación del esquema para clientes</a></li>
<li><a class="reference internal" href="#ejercicio-lista-de-codigos">Ejercicio: lista de códigos</a></li>
<li><a class="reference internal" href="#ejercicio-otra-lista-de-clientes">Ejercicio: otra lista de clientes</a></li>
<li><a class="reference internal" href="#ejercicio-listas-de-productos">Ejercicio: listas de productos</a></li>
<li><a class="reference internal" href="#ejercicio-validacion-de-componentes">Ejercicio: validación de componentes</a></li>
<li><a class="reference internal" href="#ejercicio-inventario">Ejercicio: inventario</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ejercicio-tipo-examen">Ejercicio tipo examen</a></li>
<li><a class="reference internal" href="#ejercicio-tipo-examen-ii">Ejercicio tipo examen (II)</a></li>
<li><a class="reference internal" href="#examen">Examen</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="tema4.html" title="capítulo anterior">Javascript</a></li>
      <li>Next: <a href="tema6.html" title="próximo capítulo">Recuperación de información</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/tema5.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Búsqueda rápida</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Ir a" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Oscar Gomez.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/tema5.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>